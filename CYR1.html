<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="manifest" href="./manifest.json" />
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Rúbricas Computación y Robótica 1º ESO</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuente Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Estilo para la fuente Inter */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilo para el scrollbar (opcional pero mejora la estética) */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* cool-gray-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* cool-gray-400 */
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* cool-gray-100 */
        }
        
        /* Estilos para el tooltip - CORREGIDOS */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }
        
        .tooltip-content {
            visibility: hidden;
            width: 320px;
            background-color: #1f2937;
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 12px 16px;
            position: absolute;
            z-index: 100;
            top: 125%; /* Cambiado de bottom a top */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            font-size: 0.875rem;
        }
        
        .tooltip-container:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip-content::after {
            content: "";
            position: absolute;
            bottom: 100%; /* Cambiado de top a bottom */
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: transparent transparent #1f2937 transparent; /* Cambiado para que apunte hacia arriba */
        }
        
        .tooltip-trigger {
            border-bottom: 1px dashed #6b7280;
            cursor: help;
            padding-bottom: 2px;
        }
        
        .tooltip-trigger:hover {
            color: #3b82f6;
        }

        /* Estilos responsivos adicionales */
        @media (max-width: 768px) {
            .rubric-table {
                font-size: 0.75rem;
            }
            
            .rubric-cell {
                padding: 0.5rem 0.25rem;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -100%;
                width: 80%;
                height: 100vh;
                z-index: 40;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 30;
            }
            
            .overlay.open {
                display: block;
            }
        }
        
        @media (max-width: 640px) {
            .main-title {
                font-size: 1.5rem;
            }
            
            .btn-text {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- PANTALLA PRINCIPAL -->
    <div id="main-screen" class="min-h-screen flex flex-col justify-center items-center p-4 sm:p-6">
        <div class="max-w-lg w-full bg-white rounded-xl shadow-lg p-6 md:p-8 lg:p-10">
            <!-- Icono grande principal -->
            <div class="flex justify-center mb-4 md:mb-6">
                <div class="w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 rounded-full bg-blue-100 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
            
            <div class="text-center mb-6 md:mb-8">
                <h1 class="main-title text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 mb-1 md:mb-2">CRITERIOS DE EVALUACIÓN <br> Y <br> RÚBRICAS</h1>
                <p class="text-base md:text-lg text-gray-600">COMPUTACIÓN Y ROBÓTICA 1º ESO</p>
            </div>
            
            <div class="space-y-3 md:space-y-4">
                <button id="btn-competencias" class="w-full py-3 md:py-4 px-4 md:px-6 rounded-lg bg-blue-600 text-white font-semibold text-base md:text-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 shadow-sm flex items-center justify-center gap-2 md:gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd" />
                    </svg>
                    <span class="btn-text">Selección por competencias específicas</span>
                </button>
                
                <button id="btn-multiple" class="w-full py-3 md:py-4 px-4 md:px-6 rounded-lg bg-green-600 text-white font-semibold text-base md:text-lg hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm flex items-center justify-center gap-2 md:gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="btn-text">Selección múltiple</span>
                </button>
            </div>
        </div>
    </div>

    <!-- PANTALLA DE COMPETENCIAS -->
    <div id="competencias-screen" class="min-h-screen flex flex-col" style="display: none;">
        <div class="flex flex-col md:flex-row min-h-screen">
            <!-- Botón de menú móvil -->
            <button id="mobile-menu-btn-competencias" class="mobile-menu-btn md:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-blue-600 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <!-- Overlay para móvil -->
            <div id="overlay-competencias" class="overlay"></div>
            
            <!-- BARRA LATERAL DE NAVEGACIÓN -->
            <nav id="sidebar-competencias" class="sidebar w-full md:w-64 lg:w-72 bg-white shadow-md flex-shrink-0">
                <div class="p-4 md:p-6 border-b">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-lg md:text-xl lg:text-2xl font-bold text-gray-800">Computación y Robótica 1º ESO</h1>
                            <p class="text-sm text-gray-500">Selección por Competencias</p>
                        </div>
                        <button id="close-sidebar-competencias" class="md:hidden p-1 rounded-md bg-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <button id="back-from-competencias" class="mt-1 md:mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Volver al inicio
                    </button>
                </div>
                <div class="p-3 md:p-4 overflow-y-auto md:h-[calc(100vh-105px)]">
                    <ul id="competencias-lista" class="space-y-1.5">
                        <!-- Los botones de las competencias se generarán aquí con JavaScript -->
                    </ul>
                </div>
            </nav>

            <!-- ÁREA DE CONTENIDO PRINCIPAL -->
            <main class="flex-1 p-3 md:p-4 lg:p-6 xl:p-8 overflow-y-auto mt-14 md:mt-0">
                <!-- Botón de Exportar (Nuevo) -->
                <div id="export-container-competencias" class="mb-4 md:mb-6" style="display: none;">
                    <!-- Selector de formato de puntuación añadido -->
                    <div class="mb-3">
                        <label for="export-format-competencias" class="block text-sm font-medium text-gray-700 mb-1">Formato de Puntuación:</label>
                        <select id="export-format-competencias" name="export-format-competencias" class="w-full md:w-auto block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="1">10, 8, 6, 4, 2 (5 niveles)</option>
                            <option value="2">10, 8, 6, 4, 2, 0 (6 niveles, con "No entregado")</option>
                            <option value="3">10, 8.5, 7.5 ... 1.5 (9 niveles)</option>
                            <option value="4">10, 8.5, 7.5 ... 1.5, 0 (10 niveles, con "No entregado")</option>
                        </select>
                    </div>
                    <button id="export-csv-button-competencias" class="w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-3 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Exportar a Google Classroom (CSV)
                    </button>
                    <div class="text-sm text-gray-600 mt-2">
                        <div class="tooltip-container">
                            <span class="tooltip-trigger">Archivo .csv para llevar a Google Classroom</span>
                            <div class="tooltip-content">
                                <p class="font-semibold mb-2 text-white">Siguientes pasos:</p>
                                <ol class="list-decimal pl-5 space-y-1 text-gray-200">
                                    <li>Exporta el .csv desde la aplicación</li>
                                    <li>Abre una Google Sheet en blanco</li>
                                    <li>Importa el archivo .csv a la Google Sheet</li>
                                    <li>Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"</li>
                                    <li>Importa la rúbrica desde Classroom</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenedor para las rúbricas dinámicas -->
                <div id="rubrics-container-competencias" class="space-y-6 md:space-y-8">
                    <!-- Las rúbricas seleccionadas se insertarán aquí -->
                </div>

                <!-- Mensaje de bienvenida/instrucción inicial -->
                <div id="welcome-message-competencias" class="text-center p-6 md:p-8 lg:p-10 bg-white rounded-xl shadow-lg">
                    <svg class="mx-auto h-10 w-10 md:h-12 md:w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-2 text-base md:text-lg font-medium text-gray-800">Selecciona una Competencia</h3>
                    <p class="mt-1 text-xs md:text-sm text-gray-500">Haz clic en una competencia de la barra lateral para ver sus criterios de evaluación.</p>
                </div>
            </main>
        </div>
    </div>

    <!-- PANTALLA DE SELECCIÓN MÚLTIPLE -->
    <div id="multiple-screen" class="min-h-screen flex flex-col" style="display: none;">
        <div class="flex flex-col md:flex-row min-h-screen">
            <!-- Botón de menú móvil -->
            <button id="mobile-menu-btn-multiple" class="mobile-menu-btn md:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-blue-600 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <!-- Overlay para móvil -->
            <div id="overlay-multiple" class="overlay"></div>
            
            <!-- BARRA LATERAL DE NAVEGACIÓN -->
            <nav id="sidebar-multiple" class="sidebar w-full md:w-64 lg:w-72 bg-white shadow-md flex-shrink-0">
                <div class="p-4 md:p-6 border-b">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-lg md:text-xl lg:text-2xl font-bold text-gray-800">Computación y Robótica 1º ESO</h1>
                            <p class="text-sm text-gray-500">Criterios de Evaluación</p>
                        </div>
                        <button id="close-sidebar-multiple" class="md:hidden p-1 rounded-md bg-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <button id="back-from-multiple" class="mt-1 md:mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Volver al inicio
                    </button>
                </div>
                <div class="p-3 md:p-4 overflow-y-auto md:h-[calc(100vh-105px)]">
                    <ul id="criterios-lista" class="space-y-1.5">
                        <!-- Los botones de los criterios se generarán aquí con JavaScript -->
                    </ul>
                </div>
            </nav>

            <!-- ÁREA DE CONTENIDO PRINCIPAL -->
            <main class="flex-1 p-3 md:p-4 lg:p-6 xl:p-8 overflow-y-auto mt-14 md:mt-0">
                <!-- Botón de Exportar (Nuevo) -->
                <div id="export-container" class="mb-4 md:mb-6" style="display: none;">
                    <!-- Selector de formato de puntuación añadido -->
                    <div class="mb-3">
                        <label for="export-format-multiple" class="block text-sm font-medium text-gray-700 mb-1">Formato de Puntuación:</label>
                        <select id="export-format-multiple" name="export-format-multiple" class="w-full md:w-auto block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="1">10, 8, 6, 4, 2 (5 niveles)</option>
                            <option value="2">10, 8, 6, 4, 2, 0 (6 niveles, con "No entregado")</option>
                            <option value="3">10, 8.5, 7.5 ... 1.5 (9 niveles)</option>
                            <option value="4">10, 8.5, 7.5 ... 1.5, 0 (10 niveles, con "No entregado")</option>
                        </select>
                    </div>
                    <button id="export-csv-button" class="w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-3 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Exportar a Google Classroom (CSV)
                    </button>
                    <div class="text-sm text-gray-600 mt-2">
                        <div class="tooltip-container">
                            <span class="tooltip-trigger">Archivo .csv para llevar a Google Classroom</span>
                            <div class="tooltip-content">
                                <p class="font-semibold mb-2 text-white">Siguientes pasos:</p>
                                <ol class="list-decimal pl-5 space-y-1 text-gray-200">
                                    <li>Exporta el .csv desde la aplicación</li>
                                    <li>Abre una Google Sheet en blanco</li>
                                    <li>Importa el archivo .csv a la Google Sheet</li>
                                    <li>Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"</li>
                                    <li>Importa la rúbrica desde Classroom</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenedor para las rúbricas dinámicas -->
                <div id="rubrics-container" class="space-y-6 md:space-y-8">
                    <!-- Las rúbricas seleccionadas se insertarán aquí -->
                </div>

                <!-- Mensaje de bienvenida/instrucción inicial -->
                <div id="welcome-message" class="text-center p-6 md:p-8 lg:p-10 bg-white rounded-xl shadow-lg">
                    <svg class="mx-auto h-10 w-10 md:h-12 md:w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-2 text-base md:text-lg font-medium text-gray-800">Selecciona uno o más Criterios</h3>
                    <p class="mt-1 text-xs md:text-sm text-gray-500">Haz clic en los criterios de la barra lateral para ver sus rúbricas. Puedes seleccionar varios a la vez.</p>
                </div>
            </main>
        </div>
    </div>

    <script>
        // =========================================================================
        // === INICIO DE LA ZONA DE EDICIÓN DE DATOS ===
        // =========================================================================
        
        const rubricasData = [
            {
                id: "c1",
                titulo: "CYR.1.1.1. Comprender el funcionamiento global de los sistemas de computación física, sus componentes y principales características.",
                descripcion: "Comprender el funcionamiento global de los sistemas de computación física, sus componentes y principales características.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No identifica ni describe los componentes básicos de un sistema de computación física ni sus características.</li><li class='pl-2'>No reconoce la diferencia entre hardware y software ni entre entrada, proceso y salida.</li><li class='pl-2'>No realiza ninguna actividad práctica con sistemas de computación física.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica algunos componentes básicos de un sistema de computación física pero no los describe ni explica sus características.</li><li class='pl-2'>Reconoce la diferencia entre hardware y software pero no entre entrada, proceso y salida.</li><li class='pl-2'>Realiza alguna actividad práctica con sistemas de computación física pero con dificultad y sin seguir las instrucciones adecuadas.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica y describe los componentes básicos de un sistema de computación física y sus características principales.</li><li class='pl-2'>Reconoce la diferencia entre hardware y software y entre entrada, proceso y salida.</li><li class='pl-2'>Realiza actividades prácticas con sistemas de computación física siguiendo las instrucciones dadas pero sin mostrar iniciativa ni creatividad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica, describe y explica los componentes básicos de un sistema de computación física y sus características principales.</li><li class='pl-2'>Reconoce la diferencia entre hardware y software y entre entrada, proceso y salida, y da ejemplos concretos.</li><li class='pl-2'>Realiza actividades prácticas con sistemas de computación física siguiendo las instrucciones dadas y mostrando iniciativa y creatividad.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica, describe, explica y compara los componentes básicos de un sistema de computación física y sus características principales.</li><li class='pl-2'>Reconoce la diferencia entre hardware y software y entre entrada, proceso y salida, y da ejemplos concretos y variados.</li><li class='pl-2'>Realiza actividades prácticas con sistemas de computación física siguiendo las instrucciones dadas y mostrando iniciativa, creatividad e innovación.</li></ul>" }
                ]
            },
            {
                id: "c2",
                titulo: "CYR.1.1.2. Reconocer el papel de la robótica en nuestra sociedad, indicando el marco elemental de trabajo de los mismos.",
                descripcion: "Reconocer el papel de la robótica en nuestra sociedad, indicando el marco elemental de trabajo de los mismos.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No participa en las actividades propuestas sobre el papel de la robótica en nuestra sociedad ni el marco elemental de trabajo de los robots.</li><li class='pl-2'>No identifica ni expone ningún ejemplo de aplicación de la robótica en diferentes ámbitos ni de los elementos que componen un robot.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Participa de forma pasiva en las actividades propuestas sobre el papel de la robótica en nuestra sociedad y el marco elemental de trabajo de los robots.</li><li class='pl-2'>Identifica o expone algún ejemplo de aplicación de la robótica en diferentes ámbitos o de los elementos que componen un robot, pero con errores o imprecisiones.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Participa activamente en las actividades propuestas sobre el papel de la robótica en nuestra sociedad y el marco elemental de trabajo de los robots.</li><li class='pl-2'>Identifica y expone algunos ejemplos de aplicación de la robótica en diferentes ámbitos y de los elementos que componen un robot, con corrección, pero de modo muy básico.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Participa activamente y con interés en las actividades propuestas sobre el papel de la robótica en nuestra sociedad y el marco elemental de trabajo de los robots.</li><li class='pl-2'>Identifica y expone varios ejemplos de aplicación de la robótica en diferentes ámbitos y de los elementos que componen un robot, con detalle y precisión.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Participa activamente, con interés y con iniciativa en las actividades propuestas sobre el papel de la robótica en nuestra sociedad y el marco elemental de trabajo de los robots.</li><li class='pl-2'>Identifica y expone diversos ejemplos de aplicación de la robótica en diferentes ámbitos y de los elementos que componen un robot, con profundidad y rigor.</li></ul>" }
                ]
            },
            {
                id: "c3",
                titulo: "CYR.1.1.3. Entender la estructura básica de un programa informático.",
                descripcion: "Entender la estructura básica de un programa informático.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No entiende la estructura básica de un programa informático ni los conceptos de algoritmo, instrucción, variable, dato, operador y control de flujo.</li><li class='pl-2'>No es capaz de diseñar ni ejecutar ningún programa informático sencillo.</li><li class='pl-2'>No utiliza ningún lenguaje de programación ni herramienta informática.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entiende de forma superficial la estructura básica de un programa informático y algunos conceptos de algoritmo, instrucción, variable, dato, operador y control de flujo.</li><li class='pl-2'>Es capaz de diseñar o ejecutar algún programa informático sencillo pero con errores o dificultades.</li><li class='pl-2'>Utiliza algún lenguaje de programación o herramienta informática pero sin dominio ni adecuación.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entiende la estructura básica de un programa informático y los conceptos de algoritmo, instrucción, variable, dato, operador y control de flujo.</li><li class='pl-2'>Es capaz de diseñar y ejecutar programas informáticos sencillos con corrección y claridad.</li><li class='pl-2'>Utiliza lenguajes de programación y herramientas informáticas adecuados pero sin mostrar iniciativa ni creatividad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entiende y explica la estructura básica de un programa informático y los conceptos de algoritmo, instrucción, variable, dato, operador y control de flujo.</li><li class='pl-2'>Es capaz de diseñar y ejecutar programas informáticos sencillos con detalle y precisión.</li><li class='pl-2'>Utiliza lenguajes de programación y herramientas informáticas adecuados y muestra iniciativa y creatividad.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entiende, explica y aplica la estructura básica de un programa informático y los conceptos de algoritmo, instrucción, variable, dato, operador y control de flujo.</li><li class='pl-2'>Es capaz de diseñar y ejecutar programas informáticos sencillos con profundidad y rigor.</li><li class='pl-2'>Utiliza lenguajes de programación y herramientas informáticas adecuados y muestra iniciativa, creatividad e innovación.</li></ul>" }
                ]
            },
            {
                id: "c4",
                titulo: "CYR.1.1.4. Comprender los principios básicos de ingeniería en los que se basan los robots.",
                descripcion: "Comprender los principios básicos de ingeniería en los que se basan los robots.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No comprende los principios básicos de ingeniería en los que se basan los robots ni los conceptos de sensor, actuador, controlador y comunicación.</li><li class='pl-2'>No es capaz de identificar ni utilizar ningún componente robótico ni de montar ni programar ningún robot sencillo.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Comprende de forma superficial los principios básicos de ingeniería en los que se basan los robots y algunos conceptos de sensor, actuador, controlador y comunicación.</li><li class='pl-2'>Es capaz de identificar o utilizar algún componente robótico o de montar o programar algún robot sencillo pero con errores o dificultades.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Comprende los principios básicos de ingeniería en los que se basan los robots y los conceptos de sensor, actuador, controlador y comunicación.</li><li class='pl-2'>Es capaz de identificar y utilizar componentes robóticos y de montar y programar robots sencillos con corrección y claridad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Comprende y explica los principios básicos de ingeniería en los que se basan los robots y los conceptos de sensor, actuador, controlador y comunicación.</li><li class='pl-2'>Es capaz de identificar, utilizar y explicar componentes robóticos y de montar y programar robots sencillos con detalle y precisión.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Comprende, explica y aplica los principios básicos de ingeniería en los que se basan los robots y los conceptos de sensor, actuador, controlador y comunicación.</li><li class='pl-2'>Es capaz de identificar, utilizar, explicar y comparar componentes robóticos y de montar y programar robots sencillos con profundidad y rigor.</li></ul>" }
                ]
            },
            {
                id: "c5",
                titulo: "CYR.1.2.1. Conocer y resolver la variedad de problemas posibles, desarrollando un programa informático y generalizando las soluciones, tanto de forma individual como trabajando en equipo, colaborando y comunicándose de forma adecuada.",
                descripcion: "Conocer y resolver la variedad de problemas posibles, desarrollando un programa informático y generalizando las soluciones, tanto de forma individual como trabajando en equipo, colaborando y comunicándose de forma adecuada.",
                competencia: 2,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No desarrolla ningún programa informático ni generaliza las soluciones.</li><li class='pl-2'>No trabaja de forma individual ni en equipo ni colabora ni se comunica de forma adecuada.</li><li class='pl-2'>No respeta ni valora el trabajo propio ni el ajeno.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla algún programa informático o generaliza alguna solución, pero con errores o dificultades.</li><li class='pl-2'>Trabaja de forma individual o en equipo o colabora o se comunica de forma adecuada, pero con dificultad.</li><li class='pl-2'>Respeta y valora el trabajo propio y el ajeno con dificultad.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla programas informáticos y generaliza las soluciones, con corrección y claridad.</li><li class='pl-2'>Trabaja de forma individual y en equipo y colabora y se comunica de forma adecuada, siguiendo las normas establecidas.</li><li class='pl-2'>Respeta y valora el trabajo propio y el ajeno adecuadamente.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla programas informáticos y generaliza las soluciones, con detalle y precisión.</li><li class='pl-2'>Trabaja de forma individual y en equipo y colabora y se comunica de forma adecuada, mostrando iniciativa y creatividad.</li><li class='pl-2'>Respeta, valora y mejora el trabajo propio y el ajeno correctamente.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla programas informáticos y generaliza las soluciones, con profundidad y rigor.</li><li class='pl-2'>Trabaja de forma individual y en equipo y colabora y se comunica de forma adecuada, mostrando iniciativa, creatividad e innovación.</li><li class='pl-2'>Respeta, valora, mejora y comparte el trabajo propio y el ajeno eficientemente.</li></ul>" }
                ]
            },
            {
                id: "c6",
                titulo: "CYR.1.2.3. Conocer y resolver la variedad de problemas posibles desarrollando una aplicación móvil, particularizando las soluciones.",
                descripcion: "Conocer y resolver la variedad de problemas posibles desarrollando una aplicación móvil, particularizando las soluciones.",
                competencia: 2,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No desarrolla ninguna aplicación móvil ni particulariza las soluciones.</li><li class='pl-2'>No identifica ni utiliza ningún componente ni función de una aplicación móvil.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla alguna aplicación móvil o particulariza alguna solución, pero con errores o dificultades.</li><li class='pl-2'>Identifica o utiliza algún componente o función de una aplicación móvil, pero con errores o imprecisiones.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla aplicaciones móviles y particulariza las soluciones, con corrección y claridad.</li><li class='pl-2'>Identifica y utiliza componentes y funciones de una aplicación móvil, con corrección y claridad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla aplicaciones móviles y particulariza las soluciones, con detalle y precisión.</li><li class='pl-2'>Identifica, utiliza y explica componentes y funciones de una aplicación móvil, con detalle y precisión.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Desarrolla aplicaciones móviles y particulariza las soluciones, con profundidad y rigor.</li><li class='pl-2'>Identifica, utiliza, explica y compara componentes y funciones de una aplicación móvil, con profundidad y rigor.</li></ul>" }
                ]
            },
            {
                id: "c7",
                titulo: "CYR.1.3.1. Ser capaz de construir un sistema de computación o robótico, promoviendo la interacción con el mundo físico en el contexto de un problema del mundo real, de forma sostenible.",
                descripcion: "Ser capaz de construir un sistema de computación o robótico, promoviendo la interacción con el mundo físico en el contexto de un problema del mundo real, de forma sostenible.",
                competencia: 3,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No es capaz de construir un sistema de computación o robótico, ni de identificar ni resolver un problema del mundo real relacionado con el mismo.</li><li class='pl-2'>No tiene en cuenta la interacción con el mundo físico ni la sostenibilidad del sistema.</li><li class='pl-2'>No utiliza los materiales, herramientas ni lenguajes adecuados.</li><li class='pl-2'>No sigue los pasos del proceso de diseño ni documenta su trabajo.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de construir un sistema de computación o robótico básico, pero no lo relaciona con un problema del mundo real.</li><li class='pl-2'>Tiene en cuenta la interacción con el mundo físico y la sostenibilidad del sistema de forma superficial o incompleta.</li><li class='pl-2'>Utiliza los materiales, herramientas y lenguajes adecuados de forma parcial o incorrecta.</li><li class='pl-2'>Sigue algunos pasos del proceso de diseño y documenta su trabajo con errores o lagunas.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de construir un sistema de computación o robótico adecuado, y lo relaciona con un problema del mundo real.</li><li class='pl-2'>Tiene en cuenta la interacción con el mundo físico y la sostenibilidad del sistema de forma correcta y coherente.</li><li class='pl-2'>Utiliza los materiales, herramientas y lenguajes adecuados de forma correcta y eficiente.</li><li class='pl-2'>Sigue todos los pasos del proceso de diseño y documenta su trabajo correctamente, pero sin detalle.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de construir un sistema de computación o robótico óptimo, y lo relaciona con un problema del mundo real relevante y significativo.</li><li class='pl-2'>Tiene en cuenta la interacción con el mundo físico y la sostenibilidad del sistema de forma crítica y creativa.</li><li class='pl-2'>Utiliza los materiales, herramientas y lenguajes adecuados de forma correcta, eficiente y diversa.</li><li class='pl-2'>Sigue todos los pasos del proceso de diseño y documenta su trabajo correctamente y con detalle.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de construir un sistema de computación o robótico innovador, y lo relaciona con un problema del mundo real complejo y desafiante.</li><li class='pl-2'>Tiene en cuenta la interacción con el mundo físico y la sostenibilidad del sistema de forma crítica, creativa y ética.</li><li class='pl-2'>Utiliza los materiales, herramientas y lenguajes adecuados de forma correcta, eficiente, diversa y original.</li><li class='pl-2'>Sigue todos los pasos del proceso de diseño y documenta su trabajo correctamente, con detalle y con reflexión.</li></ul>" }
                ]
            },
            {
                id: "c8",
                titulo: "CYR.1.4.1. Conocer la naturaleza de los distintos tipos de datos generados hoy en día, siendo capaces de analizarlos, visualizarlos y compararlos, empleando a su vez un espíritu crítico y científico.",
                descripcion: "Conocer la naturaleza de los distintos tipos de datos generados hoy en día, siendo capaces de analizarlos, visualizarlos y compararlos, empleando a su vez un espíritu crítico y científico.",
                competencia: 4,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No completa ni entrega el cuestionario sobre tipos de datos y su representación gráfica que se le ha facilitado en clase o en la plataforma virtual.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Completa y entrega el cuestionario sobre tipos de datos y su representación gráfica que se le ha facilitado en clase o en la plataforma virtual, pero con errores o lagunas conceptuales.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Completa y entrega el cuestionario sobre tipos de datos y su representación gráfica que se le ha facilitado en clase o en la plataforma virtual, con un nivel aceptable de comprensión y aplicación.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Completa y entrega el cuestionario sobre tipos de datos y su representación gráfica que se le ha facilitado en clase o en la plataforma virtual, con un nivel alto de comprensión y aplicación, y aporta ejemplos propios o extraídos de otras fuentes.</li><li class='pl-2'>Además, realiza o entrega una presentación digital sobre un tipo de dato concreto y su uso en la sociedad actual.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Completa y entrega el cuestionario sobre tipos de datos y su representación gráfica que se le ha facilitado en clase o en la plataforma virtual, con un nivel sobresaliente de comprensión y aplicación, y aporta ejemplos propios o extraídos de otras fuentes, así como reflexiones personales sobre el tema.</li><li class='pl-2'>Además, realiza o entrega una presentación digital sobre un tipo de dato concreto y su uso en la sociedad actual, incluyendo una propuesta creativa para mejorar su tratamiento o visualización.</li></ul>" }
                ]
            },
            {
                id: "c9",
                titulo: "CYR.1.4.2. Comprender los principios básicos de funcionamiento de los agentes inteligentes y de las técnicas de aprendizaje automático, con objeto de aplicarlos para la resolución de situaciones mediante la Inteligencia Artificial de forma ética y responsable.",
                descripcion: "Comprender los principios básicos de funcionamiento de los agentes inteligentes y de las técnicas de aprendizaje automático, con objeto de aplicarlos para la resolución de situaciones mediante la Inteligencia Artificial de forma ética y responsable.",
                competencia: 4,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No realiza ni entrega el trabajo sobre agentes inteligentes y aprendizaje automático que se le ha propuesto en clase o en la plataforma virtual.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el trabajo sobre agentes inteligentes y aprendizaje automático que se le ha propuesto en clase o en la plataforma virtual, pero con errores o lagunas conceptuales.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el trabajo sobre agentes inteligentes y aprendizaje automático que se le ha propuesto en clase o en la plataforma virtual, con un nivel aceptable de comprensión y aplicación.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el trabajo sobre agentes inteligentes y aprendizaje automático que se le ha propuesto en clase o en la plataforma virtual, con un nivel alto de comprensión y aplicación, y aporta ejemplos propios o extraídos de otras fuentes.</li><li class='pl-2'>Además, realiza o entrega una simulación práctica sobre el uso de un agente inteligente para resolver un problema real.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el trabajo sobre agentes inteligentes y aprendizaje automático que se le ha propuesto en clase o en la plataforma virtual, con un nivel sobresaliente de comprensión y aplicación, y aporta ejemplos propios o extraídos de otras fuentes, así como reflexiones personales sobre el tema.</li><li class='pl-2'>Además, realiza o entrega una simulación práctica sobre el uso de un agente inteligente para resolver un problema real, incluyendo una evaluación crítica sobre sus ventajas e inconvenientes desde una perspectiva ética y responsable.</li></ul>" }
                ]
            },
            {
                id: "c10",
                titulo: "CYR.1.5.1. Conocer la construcción de aplicaciones informáticas y web, entendiendo su funcionamiento interno, de forma segura, responsable y respetuosa.",
                descripcion: "Conocer la construcción de aplicaciones informáticas y web, entendiendo su funcionamiento interno, de forma segura, responsable y respetuosa.",
                competencia: 5,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No realiza ni entrega el proyecto sobre el diseño y desarrollo de una aplicación informática o web que se le ha propuesto en clase o en la plataforma virtual.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el proyecto sobre el diseño y desarrollo de una aplicación informática o web que se le ha propuesto en clase o en la plataforma virtual, pero con errores o lagunas conceptuales, o sin tener en cuenta aspectos de seguridad, responsabilidad o respeto.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el proyecto sobre el diseño y desarrollo de una aplicación informática o web que se le ha propuesto en clase o en la plataforma virtual, con un nivel aceptable de comprensión y aplicación, y teniendo en cuenta aspectos de seguridad, responsabilidad o respeto.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el proyecto sobre el diseño y desarrollo de una aplicación informática o web que se le ha propuesto en clase o en la plataforma virtual, con un nivel alto de comprensión y aplicación, y teniendo en cuenta aspectos de seguridad, responsabilidad o respeto.</li><li class='pl-2'>Además, realiza o entrega una prueba de funcionamiento de su aplicación informática o web, explicando los resultados obtenidos.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el proyecto sobre el diseño y desarrollo de una aplicación informática o web que se le ha propuesto en clase o en la plataforma virtual, con un nivel sobresaliente de comprensión y aplicación, y teniendo en cuenta aspectos de seguridad, responsabilidad o respeto.</li><li class='pl-2'>Además, realiza o entrega una prueba de funcionamiento de su aplicación informática o web, explicando los resultados obtenidos, así como una evaluación crítica sobre las ventajas e inconvenientes de su aplicación desde una perspectiva técnica y social.</li></ul>" }
                ]
            },
            {
                id: "c11",
                titulo: "CYR.1.5.2. Conocer y resolver la variedad de problemas potencialmente presentes en el desarrollo de una aplicación web, tratando de generalizar posibles soluciones.",
                descripcion: "Conocer y resolver la variedad de problemas potencialmente presentes en el desarrollo de una aplicación web, tratando de generalizar posibles soluciones.",
                competencia: 5,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No realiza y entrega el ejercicio sobre la identificación y resolución de problemas en el desarrollo de una aplicación web que se le ha propuesto en clase o en la plataforma virtual.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el ejercicio sobre la identificación y resolución de problemas en el desarrollo de una aplicación web que se le ha propuesto en clase o en la plataforma virtual, pero con errores o lagunas conceptuales, o sin mostrar capacidad de generalización.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el ejercicio sobre la identificación y resolución de problemas en el desarrollo de una aplicación web que se le ha propuesto en clase o en la plataforma virtual, con un nivel aceptable de comprensión y aplicación, y mostrando alguna capacidad de generalización.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el ejercicio sobre la identificación y resolución de problemas en el desarrollo de una aplicación web que se le ha propuesto en clase o en la plataforma virtual, con un nivel alto de comprensión y aplicación, y mostrando una buena capacidad de generalización.</li><li class='pl-2'>Además, realiza o entrega un informe sobre las soluciones generales que ha encontrado para los problemas más comunes o frecuentes en el desarrollo de una aplicación web.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza y entrega el ejercicio sobre la identificación y resolución de problemas en el desarrollo de una aplicación web que se le ha propuesto en clase o en la plataforma virtual, con un nivel sobresaliente de comprensión y aplicación, y mostrando una excelente capacidad de generalización.</li><li class='pl-2'>Además, realiza o entrega un informe sobre las soluciones generales que ha encontrado para los problemas más comunes o frecuentes en el desarrollo de una aplicación web, así como una propuesta creativa para mejorar alguna solución existente o crear una nueva solución para un problema específico.</li></ul>" }
                ]
            },
            {
                id: "c12",
                titulo: "CYR.1.6.1. Adoptar conductas y hábitos que permitan la protección del individuo en su interacción en la red.",
                descripcion: "Adoptar conductas y hábitos que permitan la protección del individuo en su interacción en la red.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No es capaz de identificar ni evitar el phishing, el malware, el ciberacoso, el sexting o el grooming.</li><li class='pl-2'>No configura adecuadamente las opciones de privacidad y seguridad de sus cuentas y dispositivos digitales.</li><li class='pl-2'>No contrasta ni verifica la veracidad y fiabilidad de las fuentes de información.</li><li class='pl-2'>No participa ni entrega las actividades.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de identificar y evitar algunos casos de phishing, malware, ciberacoso, sexting o grooming, pero no todos.</li><li class='pl-2'>Configura algunas opciones de privacidad y seguridad de sus cuentas y dispositivos digitales, pero no todas o no correctamente.</li><li class='pl-2'>Contrasta y verifica la veracidad y fiabilidad de algunas fuentes de información, pero no todas o no correctamente.</li><li class='pl-2'>Participa y entrega algunas actividades, pero con errores o dificultades.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de identificar y evitar los casos más habituales de phishing, malware, ciberacoso, sexting o grooming.</li><li class='pl-2'>Configura correctamente las opciones de privacidad y seguridad de sus cuentas y dispositivos digitales.</li><li class='pl-2'>Contrasta y verifica la veracidad y fiabilidad de las fuentes de información, utilizando criterios objetivos.</li><li class='pl-2'>Participa y entrega varias actividades con un nivel aceptable de calidad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de identificar y evitar los casos más frecuentes y complejos de phishing, malware, ciberacoso, sexting o grooming.</li><li class='pl-2'>Configura y revisa periódicamente las opciones de privacidad y seguridad de sus cuentas y dispositivos digitales.</li><li class='pl-2'>Contrasta y verifica la veracidad y fiabilidad de las fuentes de información, utilizando criterios objetivos y herramientas específicas.</li><li class='pl-2'>Participa y entrega diversas actividades con un nivel alto de calidad.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de identificar y evitar los casos más variados y específicos de phishing, malware, ciberacoso, sexting o grooming.</li><li class='pl-2'>Configura, revisa y mejora periódicamente las opciones de privacidad y seguridad de sus cuentas y dispositivos digitales.</li><li class='pl-2'>Contrasta y verifica la veracidad y fiabilidad de las fuentes de información, utilizando criterios objetivos, herramientas específicas y fuentes alternativas.</li><li class='pl-2'>Participa y entrega diversas actividades, con un nivel excelente de calidad e iniciativa propia.</li></ul>" }
                ]
            },
            {
                id: "c13",
                titulo: "CYR.1.6.2. Acceder a servicios de intercambio y publicación de información digital aplicando criterios básicos de seguridad y uso responsable.",
                descripcion: "Acceder a servicios de intercambio y publicación de información digital aplicando criterios básicos de seguridad y uso responsable.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No es capaz de acceder ni utilizar servicios como blogs, wikis, foros, redes sociales, plataformas educativas, repositorios digitales, etc.</li><li class='pl-2'>No crea ni gestiona adecuadamente sus cuentas y contraseñas en estos servicios.</li><li class='pl-2'>No respeta ni protege la privacidad y los datos personales propios y ajenos.</li><li class='pl-2'>No participa ni entrega las actividades.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de acceder y utilizar algunos servicios como blogs, wikis, foros, redes sociales, plataformas educativas, repositorios digitales, etc., pero no todos o no correctamente.</li><li class='pl-2'>Crea y gestiona algunas cuentas y contraseñas en estos servicios, pero no todas o no correctamente.</li><li class='pl-2'>Respeta y protege parcialmente la privacidad y los datos personales propios y ajenos.</li><li class='pl-2'>Participa y entrega algunas actividades, pero con errores o dificultades.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de acceder y utilizar los servicios más comunes como blogs, wikis, foros, redes sociales, plataformas educativas, repositorios digitales, etc., con un nivel adecuado de seguridad y responsabilidad.</li><li class='pl-2'>Crea y gestiona correctamente sus cuentas y contraseñas en estos servicios.</li><li class='pl-2'>Respeta y protege la privacidad y los datos personales propios y ajenos.</li><li class='pl-2'>Participa y entrega varias actividades, con un nivel aceptable de calidad.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de acceder y utilizar los servicios más frecuentes y complejos como blogs, wikis, foros, redes sociales, plataformas educativas, repositorios digitales, etc., con un nivel alto de seguridad y responsabilidad.</li><li class='pl-2'>Crea, gestiona y revisa periódicamente sus cuentas y contraseñas en estos servicios.</li><li class='pl-2'>Respeta, protege y promueve la privacidad y los datos personales propios y ajenos.</li><li class='pl-2'>Participa y entrega diversas actividades, con un nivel alto de calidad.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Es capaz de acceder y utilizar los servicios más variados y específicos como blogs, wikis, foros, redes sociales, plataformas educativas, repositorios digitales, etc., con un nivel óptimo de seguridad y responsabilidad.</li><li class='pl-2'>Crea, gestiona, revisa y mejora periódicamente sus cuentas y contraseñas en estos servicios.</li><li class='pl-2'>Respeta, protege, promueve y difunde la privacidad y los datos personales propios y ajenos.</li><li class='pl-2'>Participa y entrega diversas actividades, con un nivel excelente de calidad e iniciativa propia.</li></ul>" }
                ]
            },
            {
                id: "c14",
                titulo: "CYR.1.6.3. Reconocer y comprender los derechos de los materiales alojados en la web.",
                descripcion: "Reconocer y comprender los derechos de los materiales alojados en la web.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No reconoce ni comprende los derechos de los materiales alojados en la web.</li><li class='pl-2'>No respeta las normas de uso, distribución y modificación de los contenidos.</li><li class='pl-2'>No cita las fuentes ni respeta las licencias.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce y comprende parcialmente los derechos de los materiales alojados en la web.</li><li class='pl-2'>Respeta las normas de uso, distribución y modificación de los contenidos de forma ocasional.</li><li class='pl-2'>Cita las fuentes y respeta las licencias de forma incompleta o inexacta.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce y comprende los derechos de los materiales alojados en la web.</li><li class='pl-2'>Respeta las normas de uso, distribución y modificación de los contenidos de forma habitual.</li><li class='pl-2'>Cita las fuentes y respeta las licencias de forma correcta.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce y comprende los derechos de los materiales alojados en la web.</li><li class='pl-2'>Respeta las normas de uso, distribución y modificación de los contenidos de forma sistemática.</li><li class='pl-2'>Cita las fuentes y respeta las licencias de forma rigurosa.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce y comprende los derechos de los materiales alojados en la web.</li><li class='pl-2'>Respeta las normas de uso, distribución y modificación de los contenidos de forma ejemplar.</li><li class='pl-2'>Cita las fuentes y respeta las licencias de forma impecable.</li></ul>" }
                ]
            },
            {
                id: "c15",
                titulo: "CYR.1.6.4. Adoptar conductas de seguridad activa y pasiva en la protección de datos y en el intercambio de información.",
                descripcion: "Adoptar conductas de seguridad activa y pasiva en la protección de datos y en el intercambio de información.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No conoce ni respeta las normas básicas de seguridad y privacidad en el uso de las tecnologías digitales.</li><li class='pl-2'>No utiliza contraseñas seguras ni verifica la fiabilidad de las fuentes de información.</li><li class='pl-2'>Comparte datos personales o sensibles sin autorización ni consentimiento.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Conoce algunas normas básicas de seguridad y privacidad en el uso de las tecnologías digitales, pero no las aplica correctamente.</li><li class='pl-2'>Utiliza contraseñas débiles o repetidas y no verifica la fiabilidad de las fuentes de información.</li><li class='pl-2'>Comparte datos personales o sensibles sin criterio ni precaución.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Conoce y respeta las normas básicas de seguridad y privacidad en el uso de las tecnologías digitales.</li><li class='pl-2'>Utiliza contraseñas seguras y verifica la fiabilidad de las fuentes de información.</li><li class='pl-2'>Comparte datos personales o sensibles con autorización y consentimiento.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Conoce, respeta y aplica las normas avanzadas de seguridad y privacidad en el uso de las tecnologías digitales.</li><li class='pl-2'>Utiliza contraseñas seguras y cambiantes y verifica la fiabilidad de las fuentes de información con criterio crítico.</li><li class='pl-2'>Comparte datos personales o sensibles con autorización, consentimiento y precaución.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Conoce, respeta y aplica las normas avanzadas de seguridad y privacidad en el uso de las tecnologías digitales, así como los protocolos y herramientas específicas para garantizarlas.</li><li class='pl-2'>Utiliza contraseñas seguras, cambiantes y cifradas y verifica la fiabilidad de las fuentes de información con criterio crítico y contrastado.</li><li class='pl-2'>Comparte datos personales o sensibles con autorización, consentimiento, precaución y cifrado.</li></ul>" }
                ]
            }
        ];

        // Definición de competencias específicas
        const competenciasData = [
            {
                id: 1,
                titulo: "CYR.1.1. Comprender el impacto que la computación y la robótica tienen en nuestra sociedad y desarrollar el pensamiento computacional para realizar proyectos de construcción de sistemas digitales de forma sostenible.",
                descripcion: "Comprender el impacto que la computación y la robótica tienen en nuestra sociedad y desarrollar el pensamiento computacional para realizar proyectos de construcción de sistemas digitales de forma sostenible.",
                resumen: "CYR.1.1. Comprender impacto computación y robótica en sociedad y desarrollar pensamiento computacional",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 2,
                titulo: "CYR.1.2. Producir programas informáticos colaborando en un equipo de trabajo y creando aplicaciones sencillas mediante lenguaje de bloques utilizando las principales estructuras de un lenguaje de programación para solventar un problema determinado o exhibir un comportamiento deseado.",
                descripcion: "Producir programas informáticos colaborando en un equipo de trabajo y creando aplicaciones sencillas mediante lenguaje de bloques utilizando las principales estructuras de un lenguaje de programación para solventar un problema determinado o exhibir un comportamiento deseado.",
                resumen: "CYR.1.2. Producir programas informáticos colaborando en equipo y creando aplicaciones sencillas",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 3,
                titulo: "CYR.1.3. Diseñar y construir sistemas de computación físicos o robóticos sencillos, aplicando los conocimientos necesarios para desarrollar soluciones automatizadas a problemas planteados.",
                descripcion: "Diseñar y construir sistemas de computación físicos o robóticos sencillos, aplicando los conocimientos necesarios para desarrollar soluciones automatizadas a problemas planteados.",
                resumen: "CYR.1.3. Diseñar y construir sistemas de computación físicos o robóticos sencillos",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 4,
                titulo: "CYR.1.4. Recopilar, almacenar y procesar datos, identificando patrones y descubriendo conexiones para resolver problemas mediante la Inteligencia Artificial entendiendo cómo nos ayuda a mejorar nuestra comprensión del mundo.",
                descripcion: "Recopilar, almacenar y procesar datos, identificando patrones y descubriendo conexiones para resolver problemas mediante la Inteligencia Artificial entendiendo cómo nos ayuda a mejorar nuestra comprensión del mundo.",
                resumen: "CYR.1.4. Recopilar, almacenar y procesar datos para resolver problemas mediante IA",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 5,
                titulo: "CYR.1.5. Utilizar y crear aplicaciones informáticas y web sencillas, entendiendo su funcionamiento interno, de forma segura, responsable y respetuosa, protegiendo la identidad online y la privacidad.",
                descripcion: "Utilizar y crear aplicaciones informáticas y web sencillas, entendiendo su funcionamiento interno, de forma segura, responsable y respetuosa, protegiendo la identidad online y la privacidad.",
                resumen: "CYR.1.5. Utilizar y crear aplicaciones informáticas y web de forma segura y responsable",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 6,
                titulo: "CYR.1.6. Conocer y aplicar los principios de la ciberseguridad, adoptando hábitos y conductas de seguridad, para permitir la protección del individuo en su interacción en la red.",
                descripcion: "Conocer y aplicar los principios de la ciberseguridad, adoptando hábitos y conductas de seguridad, para permitir la protección del individuo en su interacción en la red.",
                resumen: "CYR.1.6. Conocer y aplicar principios de ciberseguridad para protección en la red",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293A1 1 0 0118 6v10a1 1 0 01-.293.707L14 18.414V5.586l3.707-3.293z" clip-rule="evenodd" />
                </svg>`
            }
        ];
        
        // =========================================================================
        // === FIN DE LA ZONA DE EDICIÓN DE DATOS ===
        // =========================================================================
        

        // --- LÓGICA DE LA APLICACIÓN ---

        // Elementos de la pantalla principal
        const mainScreenEl = document.getElementById('main-screen');
        const btnCompetenciasEl = document.getElementById('btn-competencias');
        const btnMultipleEl = document.getElementById('btn-multiple');

        // Elementos de la pantalla de competencias
        const competenciasScreenEl = document.getElementById('competencias-screen');
        const competenciasListaEl = document.getElementById('competencias-lista');
        const rubricsContainerCompetenciasEl = document.getElementById('rubrics-container-competencias');
        const welcomeMessageCompetenciasEl = document.getElementById('welcome-message-competencias');
        const exportContainerCompetenciasEl = document.getElementById('export-container-competencias');
        const exportButtonCompetenciasEl = document.getElementById('export-csv-button-competencias');
        const backFromCompetenciasEl = document.getElementById('back-from-competencias');
        const mobileMenuBtnCompetenciasEl = document.getElementById('mobile-menu-btn-competencias');
        const sidebarCompetenciasEl = document.getElementById('sidebar-competencias');
        const closeSidebarCompetenciasEl = document.getElementById('close-sidebar-competencias');
        const overlayCompetenciasEl = document.getElementById('overlay-competencias');

        // Elementos de la pantalla de selección múltiple
        const multipleScreenEl = document.getElementById('multiple-screen');
        const criteriosListaEl = document.getElementById('criterios-lista');
        const rubricsContainerEl = document.getElementById('rubrics-container');
        const welcomeMessageEl = document.getElementById('welcome-message');
        const exportContainerEl = document.getElementById('export-container');
        const exportButtonEl = document.getElementById('export-csv-button');
        const backFromMultipleEl = document.getElementById('back-from-multiple');
        const mobileMenuBtnMultipleEl = document.getElementById('mobile-menu-btn-multiple');
        const sidebarMultipleEl = document.getElementById('sidebar-multiple');
        const closeSidebarMultipleEl = document.getElementById('close-sidebar-multiple');
        const overlayMultipleEl = document.getElementById('overlay-multiple');

        // Estado para guardar las selecciones
        let selectedCompetencia = null;
        let selectedCriterios = [];

        /**
         * Inicializa la aplicación cuando el DOM está cargado.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // Configurar eventos de navegación
            btnCompetenciasEl.addEventListener('click', showCompetenciasScreen);
            btnMultipleEl.addEventListener('click', showMultipleScreen);
            backFromCompetenciasEl.addEventListener('click', showMainScreen);
            backFromMultipleEl.addEventListener('click', showMainScreen);
            
            // Eventos para menú móvil - competencias
            mobileMenuBtnCompetenciasEl.addEventListener('click', () => {
                sidebarCompetenciasEl.classList.add('open');
                overlayCompetenciasEl.classList.add('open');
            });
            
            closeSidebarCompetenciasEl.addEventListener('click', closeSidebarCompetencias);
            overlayCompetenciasEl.addEventListener('click', closeSidebarCompetencias);
            
            // Eventos para menú móvil - múltiple
            mobileMenuBtnMultipleEl.addEventListener('click', () => {
                sidebarMultipleEl.classList.add('open');
                overlayMultipleEl.classList.add('open');
            });
            
            closeSidebarMultipleEl.addEventListener('click', closeSidebarMultiple);
            overlayMultipleEl.addEventListener('click', closeSidebarMultiple);
            
            // Inicializar pantallas
            populateCompetenciasSidebar();
            populateCriteriosSidebar();

            // ===== INICIO: CÓDIGO MODIFICADO =====
            // Se actualizan los listeners para que lean el formato del selector
            
            exportButtonEl.addEventListener('click', () => {
                const format = document.getElementById('export-format-multiple').value;
                const criteriaToExport = rubricasData.filter(c => selectedCriterios.includes(c.id));
                generateAndDownloadCSV(criteriaToExport, format);
            });
            
            exportButtonCompetenciasEl.addEventListener('click', () => {
                const format = document.getElementById('export-format-competencias').value;
                const criteriaToExport = rubricasData.filter(c => c.competencia == selectedCompetencia);
                generateAndDownloadCSV(criteriaToExport, format);
            });
            // ===== FIN: CÓDIGO MODIFICADO =====
        });

        /**
         * Cierra el sidebar en la pantalla de competencias
         */
        function closeSidebarCompetencias() {
            sidebarCompetenciasEl.classList.remove('open');
            overlayCompetenciasEl.classList.remove('open');
        }

        /**
         * Cierra el sidebar en la pantalla de selección múltiple
         */
        function closeSidebarMultiple() {
            sidebarMultipleEl.classList.remove('open');
            overlayMultipleEl.classList.remove('open');
        }

        /**
         * Muestra la pantalla principal.
         */
        function showMainScreen() {
            mainScreenEl.style.display = 'flex';
            competenciasScreenEl.style.display = 'none';
            multipleScreenEl.style.display = 'none';
            
            // Cerrar sidebars si están abiertos
            closeSidebarCompetencias();
            closeSidebarMultiple();
        }

        /**
         * Muestra la pantalla de competencias.
         */
        function showCompetenciasScreen() {
            mainScreenEl.style.display = 'none';
            competenciasScreenEl.style.display = 'flex';
            multipleScreenEl.style.display = 'none';
            
            // Reiniciar selección
            selectedCompetencia = null;
            renderSelectedCompetenciaRubrics();
            
            // Cerrar sidebar si está abierto
            closeSidebarCompetencias();
        }

        /**
         * Muestra la pantalla de selección múltiple.
         */
        function showMultipleScreen() {
            mainScreenEl.style.display = 'none';
            competenciasScreenEl.style.display = 'none';
            multipleScreenEl.style.display = 'flex';
            
            // Reiniciar selección
            selectedCriterios = [];
            renderSelectedRubrics();
            
            // Cerrar sidebar si está abierto
            closeSidebarMultiple();
        }

        /**
         * Rellena la barra lateral con los botones de las competencias.
         */
        function populateCompetenciasSidebar() {
            if (!competenciasListaEl) return;
            
            competenciasListaEl.innerHTML = '';
            
            competenciasData.forEach(competencia => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                // Cambiado el color de fondo para distinguir competencias específicas
                button.className = "w-full text-left py-2 md:py-2.5 px-4 rounded-lg bg-blue-50 text-blue-800 hover:bg-blue-100 hover:text-blue-900 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center gap-1 md:gap-2 break-words";
                button.innerHTML = `${competencia.icono}<span class="text-sm md:text-base">${competencia.resumen}</span>`;
                button.setAttribute('data-id', competencia.id);
                
                button.addEventListener('click', () => {
                    toggleCompetencia(competencia.id, button);
                    // En móvil, cerrar el sidebar después de seleccionar
                    if (window.innerWidth < 768) {
                        closeSidebarCompetencias();
                    }
                });
                
                li.appendChild(button);
                competenciasListaEl.appendChild(li);
            });
        }

        /**
         * Rellena la barra lateral con los botones de los criterios.
         */
        function populateCriteriosSidebar() {
            if (!criteriosListaEl) return;
            
            criteriosListaEl.innerHTML = '';
            
            rubricasData.forEach(criterio => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                // Mantenido el estilo original para los criterios
                button.className = "w-full text-left py-2 md:py-2.5 px-4 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-blue-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center gap-1 md:gap-2 break-words";
                
                // Añadir icono según el tipo de criterio
                let iconoHTML = '';
                if (criterio.titulo.includes('Comprender') || criterio.titulo.includes('Reconocer') || criterio.titulo.includes('Entender')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                    </svg>`;
                } else if (criterio.titulo.includes('Conocer') || criterio.titulo.includes('Ser capaz')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
                    </svg>`;
                } else if (criterio.titulo.includes('Acceder') || criterio.titulo.includes('Adoptar')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                    </svg>`;
                } else {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
                    </svg>`;
                }
                
                button.innerHTML = `${iconoHTML}<span class="text-sm md:text-base">${criterio.titulo}</span>`;
                button.setAttribute('data-id', criterio.id);
                
                button.addEventListener('click', () => {
                    toggleCriterio(criterio.id, button);
                    // En móvil, cerrar el sidebar después de seleccionar
                    if (window.innerWidth < 768) {
                        closeSidebarMultiple();
                    }
                });
                
                li.appendChild(button);
                criteriosListaEl.appendChild(li);
            });
        }

        /**
         * Selecciona una competencia y actualiza la vista.
         */
        function toggleCompetencia(competenciaId, buttonEl) {
            // Si ya está seleccionada, deseleccionar
            if (selectedCompetencia === competenciaId) {
                selectedCompetencia = null;
                updateButtonStyle(buttonEl, false, 'competencia');
            } else {
                // Deseleccionar cualquier competencia anterior
                const buttons = competenciasListaEl.querySelectorAll('button');
                buttons.forEach(btn => {
                    updateButtonStyle(btn, false, 'competencia');
                });
                
                // Seleccionar la nueva competencia
                selectedCompetencia = competenciaId;
                updateButtonStyle(buttonEl, true, 'competencia');
            }
            
            renderSelectedCompetenciaRubrics();
        }

        /**
         * Añade o quita un criterio de la selección y actualiza la vista.
         */
        function toggleCriterio(criterioId, buttonEl) {
            const index = selectedCriterios.indexOf(criterioId);
            
            if (index > -1) {
                selectedCriterios.splice(index, 1);
                updateButtonStyle(buttonEl, false, 'criterio');
            } else {
                selectedCriterios.push(criterioId);
                updateButtonStyle(buttonEl, true, 'criterio');
            }
            
            renderSelectedRubrics();
        }

        /**
         * Actualiza el estado visual de un botón (activo o inactivo).
         */
        function updateButtonStyle(buttonEl, isActive, type) {
            if (type === 'competencia') {
                if (isActive) {
                    buttonEl.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.remove('bg-blue-50', 'text-blue-800', 'hover:bg-blue-100', 'hover:text-blue-900');
                } else {
                    buttonEl.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.add('bg-blue-50', 'text-blue-800', 'hover:bg-blue-100', 'hover:text-blue-900');
                }
            } else { // criterio
                if (isActive) {
                    buttonEl.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.remove('text-gray-700', 'hover:bg-gray-100', 'hover:text-blue-600');
                } else {
                    buttonEl.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.add('text-gray-700', 'hover:bg-gray-100', 'hover:text-blue-600');
                }
            }
        }

        /**
         * Renderiza las rúbricas de la competencia seleccionada en el panel principal.
         */
        function renderSelectedCompetenciaRubrics() {
            rubricsContainerCompetenciasEl.innerHTML = '';
            
            if (selectedCompetencia === null) {
                welcomeMessageCompetenciasEl.style.display = 'block';
                exportContainerCompetenciasEl.style.display = 'none';
            } else {
                welcomeMessageCompetenciasEl.style.display = 'none';
                exportContainerCompetenciasEl.style.display = 'block';
                
                // Encontrar la competencia seleccionada
                const competencia = competenciasData.find(c => c.id == selectedCompetencia);
                
                // Añadir información de la competencia con el mismo formato azul que el botón seleccionado
                const competenciaHTML = `
                    <div class="bg-blue-600 text-white p-4 md:p-5 lg:p-8 rounded-xl shadow-lg transition-all duration-300 mb-6 md:mb-8">
                        <h2 class="text-xl md:text-2xl lg:text-3xl font-bold mb-3">${competencia.titulo}</h2>
                    </div>
                `;
                rubricsContainerCompetenciasEl.innerHTML += competenciaHTML;
                
                // Añadir los criterios de esta competencia
                rubricasData.forEach(criterio => {
                    if (criterio.competencia == selectedCompetencia) {
                        const rubricHTML = createRubricHTML(criterio);
                        rubricsContainerCompetenciasEl.innerHTML += rubricHTML;
                    }
                });
            }
        }

        /**
         * Renderiza las rúbricas de todos los criterios seleccionados en el panel principal.
         */
        function renderSelectedRubrics() {
            rubricsContainerEl.innerHTML = '';
            
            if (selectedCriterios.length === 0) {
                welcomeMessageEl.style.display = 'block';
                exportContainerEl.style.display = 'none';
            } else {
                welcomeMessageEl.style.display = 'none';
                exportContainerEl.style.display = 'block';
                
                rubricasData.forEach(criterio => {
                    if (selectedCriterios.includes(criterio.id)) {
                        const rubricHTML = createRubricHTML(criterio);
                        rubricsContainerEl.innerHTML += rubricHTML;
                    }
                });
            }
        }

        /**
         * Crea el string HTML para una tarjeta de rúbrica completa.
         */
        function createRubricHTML(criterio) {
            let headHTML = '<tr class="divide-x divide-gray-200">';
            criterio.niveles.forEach(nivel => {
                headHTML += `<th class="rubric-cell py-2 px-2 md:py-4 md:px-4 text-xs md:text-sm font-medium text-gray-800 align-top ${nivel.color} w-1/5">${nivel.nivel}</th>`;
            });
            headHTML += '</tr>';

            let bodyHTML = '<tr class="divide-x divide-gray-200">';
            criterio.niveles.forEach(nivel => {
                bodyHTML += `<td class="rubric-cell py-2 px-2 md:py-4 md:px-4 text-xs md:text-sm text-gray-600 align-top ${nivel.color} w-1/5">${nivel.descriptor}</td>`;
            });
            bodyHTML += '</tr>';
            
            const fullHTML = `
                <div class="bg-white p-4 md:p-5 lg:p-8 rounded-xl shadow-lg transition-all duration-300">
                    <h2 class="text-xl md:text-2xl lg:text-3xl font-bold text-blue-700 mb-6 pb-4 md:mb-8 md:pb-6 border-b border-gray-200">${criterio.titulo}</h2>
                    <div class="overflow-x-auto">
                        <table class="rubric-table min-w-full border border-gray-200 divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                ${headHTML}
                            </thead>
                            <tbody class="bg-white">
                                ${bodyHTML}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            return fullHTML;
        }

        // ===== INICIO: BLOQUE DE CÓDIGO MODIFICADO/AÑADIDO =====
        // Se eliminan las funciones exportToClassroomCSV y exportToClassroomCSVCompetencias
        // y se reemplazan por estas tres funciones nuevas:

        // --- FUNCIONES DE EXPORTACIÓN ---

        /**
         * Limpia un string HTML y lo formatea para CSV, encerrándolo entre comillas.
         */
        function cleanDescriptor(htmlString) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            const textoPlano = tempDiv.textContent || tempDiv.innerText || '';
            // Limpiar saltos de línea y espacios múltiples, y escapar comillas
            const textoLimpio = textoPlano.replace(/\s+/g, ' ').trim();
            return `"${textoLimpio.replace(/"/g, '""')}"`;
        }
        
        /**
         * Genera las líneas de puntos y descriptores según el formato seleccionado.
         */
        function getExportData(format, nivelesInvertidos) {
            let puntosLinea = "\t";
            let descriptoresLinea = "\t";
        
            // Extraer descriptores limpios (Alto a Bajo)
            const desc_10 = cleanDescriptor(nivelesInvertidos[0].descriptor); // (9-10)
            const desc_8_9 = cleanDescriptor(nivelesInvertidos[1].descriptor); // (7-8.9)
            const desc_5_6 = cleanDescriptor(nivelesInvertidos[2].descriptor); // (5-6.9)
            const desc_3_4 = cleanDescriptor(nivelesInvertidos[3].descriptor); // (3-4.9)
            const desc_1_2 = cleanDescriptor(nivelesInvertidos[4].descriptor); // (1-2.9)
            const desc_0 = `"No entregado"`;
        
            switch(String(format)) {
                case '1': // 1) 10, 8, 6, 4, 2 (5 niveles)
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}`;
                    break;
                case '2': // 2) 10, 8, 6, 4, 2, 0 (6 niveles)
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0\t0.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}\t${desc_0}`;
                    break;
                case '3': // 3) 10, 8.5, 7.5, 6.5, 5.5, 4.5, 3.5, 2.5, 1.5 (9 niveles)
                    puntosLinea += "10.0\t8.5\t7.5\t6.5\t5.5\t4.5\t3.5\t2.5\t1.5";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_8_9}\t${desc_5_6}\t${desc_5_6}\t${desc_3_4}\t${desc_3_4}\t${desc_1_2}\t${desc_1_2}`;
                    break;
                case '4': // 4) 10, 8.5, 7.5 ... 1.5, 0 (10 niveles)
                    puntosLinea += "10.0\t8.5\t7.5\t6.5\t5.5\t4.5\t3.5\t2.5\t1.5\t0.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_8_9}\t${desc_5_6}\t${desc_5_6}\t${desc_3_4}\t${desc_3_4}\t${desc_1_2}\t${desc_1_2}\t${desc_0}`;
                    break;
                default: // Fallback a la opción 1
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}`;
            }
            
            return { puntosLinea, descriptoresLinea };
        }

        /**
         * Función genérica para generar y descargar un archivo CSV con el formato de Google Classroom.
         * @param {Array} criteriaList - La lista de objetos de criterio a exportar.
         * @param {string} format - El ID del formato ('1', '2', '3', o '4').
         */
        function generateAndDownloadCSV(criteriaList, format) {
            // Cabeceras fijas
            let csvRows = [
                "Se recomienda no editar las guías de evaluación en formato de hoja de cálculo",
                "v1.0-s"
            ];
        
            if (!criteriaList || criteriaList.length === 0) {
                alert("No hay criterios seleccionados para exportar.");
                return;
            }
        
            // Procesar cada criterio
            criteriaList.forEach(criterio => {
                // Título abreviado
                const tituloAbreviado = getTituloAbreviado(criterio.titulo);
                csvRows.push(tituloAbreviado);
                
                // Descripción completa
                csvRows.push(criterio.descripcion);
                
                // Invertir niveles (de más alto a más bajo)
                const nivelesInvertidos = [...criterio.niveles].reverse();
                
                // Obtener líneas de puntos y descriptores según el formato
                const { puntosLinea, descriptoresLinea } = getExportData(format, nivelesInvertidos);
                
                csvRows.push(puntosLinea);
                csvRows.push(descriptoresLinea);
                
                // Línea vacía
                csvRows.push("");
            });
        
            // Crear y descargar el archivo
            const csvString = csvRows.join('\n');
            const BOM = '\uFEFF'; // Byte Order Mark para UTF-8
            const blob = new Blob([BOM + csvString], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'rubricas_comp_robotica_classroom.csv');
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        
            // Mostrar confirmación con los pasos correctos
            setTimeout(() => {
                alert(`Se han exportado ${criteriaList.length} criterio(s) correctamente.\n\nSiguientes pasos:\n\n1) Exporta el .csv desde la aplicación\n2) Abre una Google Sheet en blanco\n3) Importa el archivo .csv a la Google Sheet\n4) Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"\n5) Importa la rúbrica desde Classroom`);
            }, 500);
        }

        // ===== FIN: BLOQUE DE CÓDIGO MODIFICADO/AÑADIDO =====


        /**
         * Convierte el título completo en un formato abreviado para la exportación.
         * Ejemplo: "CYR.1.1.1. Comprender el funcionamiento global..." -> "CYR 1.1.1. (comprensión funcionamiento global)"
         */
        function getTituloAbreviado(tituloCompleto) {
            // Extraer el código (CYR.1.1.1.)
            const codigoMatch = tituloCompleto.match(/^(CYR\.\d+\.\d+\.\d+)\./);
            if (!codigoMatch) return tituloCompleto;
            
            const codigo = codigoMatch[1].replace(/\./g, ' '); // Convertir CYR.1.1.1 a CYR 1.1.1
            
            // Extraer la parte descriptiva y crear un título abreviado
            let descripcionAbreviada = tituloCompleto.replace(/^CYR\.\d+\.\d+\.\d+\.\s*/, '');
            
            // Crear abreviaciones comunes para Computación y Robótica
            const abreviaciones = {
                'Comprender el funcionamiento global': 'comprensión funcionamiento global',
                'Reconocer el papel de la robótica': 'reconocimiento papel robótica',
                'Entender la estructura básica': 'comprensión estructura básica',
                'Comprender los principios básicos': 'comprensión principios básicos',
                'Conocer y resolver la variedad': 'conocimiento resolución problemas',
                'Ser capaz de construir': 'construcción sistemas',
                'Conocer la naturaleza': 'conocimiento tipos datos',
                'Comprender los principios básicos de funcionamiento': 'comprensión IA',
                'Conocer la construcción': 'construcción aplicaciones',
                'Adoptar conductas y hábitos': 'protección individuo red',
                'Acceder a servicios': 'acceso servicios digitales',
                'Reconocer y comprender': 'derechos materiales web',
                'Adoptar conductas de seguridad': 'seguridad activa pasiva'
            };
            
            // Aplicar abreviación si existe
            for (const [completo, abreviado] of Object.entries(abreviaciones)) {
                if (descripcionAbreviada.includes(completo)) {
                    descripcionAbreviada = abreviado;
                    break;
                }
            }
            
            return `${codigo}. (${descripcionAbreviada})`;
        }

    </script>
    <script src="./regist_serviceWorker.js"></script>
	
</body>
</html>