<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rúbricas Tecnología y Digitalización 3º ESO</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuente Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Estilo para la fuente Inter */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilo para el scrollbar (opcional pero mejora la estética) */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* cool-gray-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* cool-gray-400 */
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* cool-gray-100 */
        }
        
        /* Estilos para el tooltip - CORREGIDOS */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }
        
        .tooltip-content {
            visibility: hidden;
            width: 320px;
            background-color: #1f2937;
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 12px 16px;
            position: absolute;
            z-index: 100;
            top: 125%; /* Cambiado de bottom a top */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            font-size: 0.875rem;
        }
        
        .tooltip-container:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip-content::after {
            content: "";
            position: absolute;
            bottom: 100%; /* Cambiado de top a bottom */
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: transparent transparent #1f2937 transparent; /* Cambiado para que apunte hacia arriba */
        }
        
        .tooltip-trigger {
            border-bottom: 1px dashed #6b7280;
            cursor: help;
            padding-bottom: 2px;
        }
        
        .tooltip-trigger:hover {
            color: #3b82f6;
        }

        /* Estilos responsivos adicionales */
        @media (max-width: 768px) {
            .rubric-table {
                font-size: 0.75rem;
            }
            
            .rubric-cell {
                padding: 0.5rem 0.25rem;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -100%;
                width: 80%;
                height: 100vh;
                z-index: 40;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 30;
            }
            
            .overlay.open {
                display: block;
            }
        }
        
        @media (max-width: 640px) {
            .main-title {
                font-size: 1.5rem;
            }
            
            .btn-text {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- PANTALLA PRINCIPAL -->
    <div id="main-screen" class="min-h-screen flex flex-col justify-center items-center p-4 sm:p-6">
        <div class="max-w-lg w-full bg-white rounded-xl shadow-lg p-6 md:p-8 lg:p-10">
            <!-- Icono grande principal -->
            <div class="flex justify-center mb-4 md:mb-6">
                <div class="w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 rounded-full bg-blue-100 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
            
            <div class="text-center mb-6 md:mb-8">
                <h1 class="main-title text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 mb-1 md:mb-2">CRITERIOS DE EVALUACIÓN <br> Y <br> RÚBRICAS</h1>
                <p class="text-base md:text-lg text-gray-600">TECNOLOGÍA Y DIGITALIZACIÓN 3º ESO</p>
            </div>
            
            <div class="space-y-3 md:space-y-4">
                <button id="btn-competencias" class="w-full py-3 md:py-4 px-4 md:px-6 rounded-lg bg-blue-600 text-white font-semibold text-base md:text-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 shadow-sm flex items-center justify-center gap-2 md:gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd" />
                    </svg>
                    <span class="btn-text">Selección por competencias específicas</span>
                </button>
                
                <button id="btn-multiple" class="w-full py-3 md:py-4 px-4 md:px-6 rounded-lg bg-green-600 text-white font-semibold text-base md:text-lg hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm flex items-center justify-center gap-2 md:gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="btn-text">Selección múltiple</span>
                </button>
            </div>
        </div>
    </div>

    <!-- PANTALLA DE COMPETENCIAS -->
    <div id="competencias-screen" class="min-h-screen flex flex-col" style="display: none;">
        <div class="flex flex-col md:flex-row min-h-screen">
            <!-- Botón de menú móvil -->
            <button id="mobile-menu-btn-competencias" class="mobile-menu-btn md:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-blue-600 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <!-- Overlay para móvil -->
            <div id="overlay-competencias" class="overlay"></div>
            
            <!-- BARRA LATERAL DE NAVEGACIÓN -->
            <nav id="sidebar-competencias" class="sidebar w-full md:w-64 lg:w-72 bg-white shadow-md flex-shrink-0">
                <div class="p-4 md:p-6 border-b">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-lg md:text-xl lg:text-2xl font-bold text-gray-800">Tecnología y Digitalización 3º ESO</h1>
                            <p class="text-sm text-gray-500">Selección por Competencias</p>
                        </div>
                        <button id="close-sidebar-competencias" class="md:hidden p-1 rounded-md bg-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <button id="back-from-competencias" class="mt-1 md:mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Volver al inicio
                    </button>
                </div>
                <div class="p-3 md:p-4 overflow-y-auto md:h-[calc(100vh-105px)]">
                    <ul id="competencias-lista" class="space-y-1.5">
                        <!-- Los botones de las competencias se generarán aquí con JavaScript -->
                    </ul>
                </div>
            </nav>

            <!-- ÁREA DE CONTENIDO PRINCIPAL -->
            <main class="flex-1 p-3 md:p-4 lg:p-6 xl:p-8 overflow-y-auto mt-14 md:mt-0">
                <!-- Botón de Exportar (Nuevo) -->
                <div id="export-container-competencias" class="mb-4 md:mb-6" style="display: none;">
                    <!-- Selector de formato de puntuación añadido -->
                    <div class="mb-3">
                        <label for="export-format-competencias" class="block text-sm font-medium text-gray-700 mb-1">Formato de Puntuación:</label>
                        <select id="export-format-competencias" name="export-format-competencias" class="w-full md:w-auto block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="1">10, 8, 6, 4, 2 (5 niveles)</option>
                            <option value="2">10, 8, 6, 4, 2, 0 (6 niveles, con "No entregado")</option>
                            <option value="3">10, 8.5, 7.5 ... 1.5 (9 niveles)</option>
                            <option value="4">10, 8.5, 7.5 ... 1.5, 0 (10 niveles, con "No entregado")</option>
                        </select>
                    </div>
                    <button id="export-csv-button-competencias" class="w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-3 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Exportar a Google Classroom (CSV)
                    </button>
                    <div class="text-sm text-gray-600 mt-2">
                        <div class="tooltip-container">
                            <span class="tooltip-trigger">Archivo .csv para llevar a Google Classroom</span>
                            <div class="tooltip-content">
                                <p class="font-semibold mb-2 text-white">Siguientes pasos:</p>
                                <ol class="list-decimal pl-5 space-y-1 text-gray-200">
                                    <li>Exporta el .csv desde la aplicación</li>
                                    <li>Abre una Google Sheet en blanco</li>
                                    <li>Importa el archivo .csv a la Google Sheet</li>
                                    <li>Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"</li>
                                    <li>Importa la rúbrica desde Classroom</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenedor para las rúbricas dinámicas -->
                <div id="rubrics-container-competencias" class="space-y-6 md:space-y-8">
                    <!-- Las rúbricas seleccionadas se insertarán aquí -->
                </div>

                <!-- Mensaje de bienvenida/instrucción inicial -->
                <div id="welcome-message-competencias" class="text-center p-6 md:p-8 lg:p-10 bg-white rounded-xl shadow-lg">
                    <svg class="mx-auto h-10 w-10 md:h-12 md:w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-2 text-base md:text-lg font-medium text-gray-800">Selecciona una Competencia</h3>
                    <p class="mt-1 text-xs md:text-sm text-gray-500">Haz clic en una competencia de la barra lateral para ver sus criterios de evaluación.</p>
                </div>
            </main>
        </div>
    </div>

    <!-- PANTALLA DE SELECCIÓN MÚLTIPLE -->
    <div id="multiple-screen" class="min-h-screen flex flex-col" style="display: none;">
        <div class="flex flex-col md:flex-row min-h-screen">
            <!-- Botón de menú móvil -->
            <button id="mobile-menu-btn-multiple" class="mobile-menu-btn md:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-blue-600 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <!-- Overlay para móvil -->
            <div id="overlay-multiple" class="overlay"></div>
            
            <!-- BARRA LATERAL DE NAVEGACIÓN -->
            <nav id="sidebar-multiple" class="sidebar w-full md:w-64 lg:w-72 bg-white shadow-md flex-shrink-0">
                <div class="p-4 md:p-6 border-b">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-lg md:text-xl lg:text-2xl font-bold text-gray-800">Tecnología y Digitalización 3º ESO</h1>
                            <p class="text-sm text-gray-500">Criterios de Evaluación</p>
                        </div>
                        <button id="close-sidebar-multiple" class="md:hidden p-1 rounded-md bg-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <button id="back-from-multiple" class="mt-1 md:mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Volver al inicio
                    </button>
                </div>
                <div class="p-3 md:p-4 overflow-y-auto md:h-[calc(100vh-105px)]">
                    <ul id="criterios-lista" class="space-y-1.5">
                        <!-- Los botones de los criterios se generarán aquí con JavaScript -->
                    </ul>
                </div>
            </nav>

            <!-- ÁREA DE CONTENIDO PRINCIPAL -->
            <main class="flex-1 p-3 md:p-4 lg:p-6 xl:p-8 overflow-y-auto mt-14 md:mt-0">
                <!-- Botón de Exportar (Nuevo) -->
                <div id="export-container" class="mb-4 md:mb-6" style="display: none;">
                    <!-- Selector de formato de puntuación añadido -->
                    <div class="mb-3">
                        <label for="export-format-multiple" class="block text-sm font-medium text-gray-700 mb-1">Formato de Puntuación:</label>
                        <select id="export-format-multiple" name="export-format-multiple" class="w-full md:w-auto block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="1">10, 8, 6, 4, 2 (5 niveles)</option>
                            <option value="2">10, 8, 6, 4, 2, 0 (6 niveles, con "No entregado")</option>
                            <option value="3">10, 8.5, 7.5 ... 1.5 (9 niveles)</option>
                            <option value="4">10, 8.5, 7.5 ... 1.5, 0 (10 niveles, con "No entregado")</option>
                        </select>
                    </div>
                    <button id="export-csv-button" class="w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-3 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Exportar a Google Classroom (CSV)
                    </button>
                    <div class="text-sm text-gray-600 mt-2">
                        <div class="tooltip-container">
                            <span class="tooltip-trigger">Archivo .csv para llevar a Google Classroom</span>
                            <div class="tooltip-content">
                                <p class="font-semibold mb-2 text-white">Siguientes pasos:</p>
                                <ol class="list-decimal pl-5 space-y-1 text-gray-200">
                                    <li>Exporta el .csv desde la aplicación</li>
                                    <li>Abre una Google Sheet en blanco</li>
                                    <li>Importa el archivo .csv a la Google Sheet</li>
                                    <li>Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"</li>
                                    <li>Importa la rúbrica desde Classroom</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenedor para las rúbricas dinámicas -->
                <div id="rubrics-container" class="space-y-6 md:space-y-8">
                    <!-- Las rúbricas seleccionadas se insertarán aquí -->
                </div>

                <!-- Mensaje de bienvenida/instrucción inicial -->
                <div id="welcome-message" class="text-center p-6 md:p-8 lg:p-10 bg-white rounded-xl shadow-lg">
                    <svg class="mx-auto h-10 w-10 md:h-12 md:w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-2 text-base md:text-lg font-medium text-gray-800">Selecciona uno o más Criterios</h3>
                    <p class="mt-1 text-xs md:text-sm text-gray-500">Haz clic en los criterios de la barra lateral para ver sus rúbricas. Puedes seleccionar varios a la vez.</p>
                </div>
            </main>
        </div>
    </div>

    <script>
        // =========================================================================
        // === INICIO DE LA ZONA DE EDICIÓN DE DATOS ===
        // =========================================================================
        
        const rubricasData = [
            {
                id: "c311",
                titulo: "TYD.3.1.1. Definir problemas o necesidades planteadas",
                descripcion: "Definir problemas o necesidades planteadas, buscando y contrastando información procedente de diferentes fuentes de manera crítica y segura, evaluando su fiabilidad y pertinencia.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No logra definir un problema tecnológico a partir de un escenario propuesto en clase.</li><li class='pl-2'>No busca información adicional ni evalúa la fiabilidad de la información presentada.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Define de manera vaga un problema tecnológico a partir de un escenario propuesto en clase.</li><li class='pl-2'>Realiza una búsqueda mínima de información pero no demuestra un análisis crítico de las fuentes ni evalúa su fiabilidad.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Define un problema tecnológico basado en un escenario propuesto en clase.</li><li class='pl-2'>Realiza una búsqueda adecuada de información en diferentes fuentes y muestra un intento de evaluación de su fiabilidad, aunque con algunas inconsistencias.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Define con precisión un problema tecnológico a partir de un escenario propuesto en clase.</li><li class='pl-2'>Realiza una búsqueda de información exhaustiva, contrastando diferentes fuentes y evaluando de manera efectiva su fiabilidad.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Define de manera clara y precisa un problema tecnológico a partir de un escenario propuesto en clase.</li><li class='pl-2'>Realiza una búsqueda de información exhaustiva y crítica, contrastando diversas fuentes y evaluando con precisión su fiabilidad y pertinencia.</li><li class='pl-2'>Adicionalmente, muestra conciencia de los riesgos y beneficios del uso de internet en la búsqueda de información.</li></ul>" }
                ]
            },
            {
                id: "c312",
                titulo: "TYD.3.1.2. Comprender y examinar productos tecnológicos",
                descripcion: "Comprender y examinar productos tecnológicos de uso habitual a través del análisis de objetos y sistemas, empleando el método científico y utilizando herramientas de simulación en la construcción de conocimiento.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No realiza el análisis de ningún producto u objeto propuesto.</li><li class='pl-2'>No sigue los pasos del método científico ni utiliza ninguna herramienta de simulación.</li><li class='pl-2'>No entrega ningún informe ni participa en las actividades propuestas.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza el análisis de algún producto u objeto propuesto, pero sin identificar ni describir sus elementos y funciones principales.</li><li class='pl-2'>Sigue algunos pasos del método científico y utiliza alguna herramienta de simulación, pero con errores o sin rigor.</li><li class='pl-2'>Entrega un informe incompleto o poco elaborado.</li><li class='pl-2'>Participa poco en las actividades propuestas.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza el análisis de los productos u objetos propuestos identificando y describiendo básicamente sus elementos y funciones principales.</li><li class='pl-2'>Sigue los pasos del método científico y utiliza las herramientas de simulación adecuadas, pero con algunas dificultades o limitaciones.</li><li class='pl-2'>Entrega un informe completo y correcto.</li><li class='pl-2'>Participa en las actividades propuestas.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza el análisis de los productos u objetos propuestos, identificando y describiendo con detalle sus elementos y funciones principales, así como sus relaciones e interacciones.</li><li class='pl-2'>Sigue los pasos del método científico y utiliza las herramientas de simulación adecuadas de forma eficaz y autónoma.</li><li class='pl-2'>Entrega un informe detallado y bien estructurado.</li><li class='pl-2'>Participa activamente en las actividades propuestas.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Realiza el análisis de los productos u objetos propuestos por el profesor o la profesora, identificando y describiendo con profundidad sus elementos y funciones principales, así como sus relaciones e interacciones, estableciendo comparaciones y clasificaciones.</li><li class='pl-2'>Sigue los pasos del método científico y utiliza las herramientas de simulación adecuadas de forma eficaz, autónoma e innovadora.</li><li class='pl-2'>Entrega un informe completo, bien estructurado y con propuestas de mejora o ampliación.</li><li class='pl-2'>Participa activamente en las actividades propuestas, mostrando iniciativa y colaboración.</li></ul>" }
                ]
            },
            {
                id: "c313",
                titulo: "TYD.3.1.3. Adoptar medidas preventivas",
                descripcion: "Adoptar medidas preventivas para la protección de los dispositivos, los datos y la salud personal, identificando problemas y riesgos relacionados con el uso de la tecnología y analizándolos de manera ética y crítica.",
                competencia: 1,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No aplica medidas de seguridad en el uso de sus dispositivos durante las actividades en clase.</li><li class='pl-2'>No identifica riesgos evidentes asociados con el uso de la tecnología.</li><li class='pl-2'>No muestra evidencias de reflexión ética y crítica en la utilización de la tecnología.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Muestra un uso básico de medidas de seguridad para sus dispositivos durante las actividades de clase.</li><li class='pl-2'>Puede identificar algunos riesgos obvios en el uso de la tecnología, pero su reflexión ética y crítica es limitada.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Utiliza medidas de seguridad para proteger sus dispositivos y datos durante las actividades de clase.</li><li class='pl-2'>Identifica y describe la mayoría de los riesgos asociados con el uso de la tecnología, y muestra una actitud ética y crítica hacia ellos.</li><li class='pl-2'>Realiza un informe escrito o una presentación donde reflexiona sobre el uso seguro de la tecnología.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Aplica medidas de seguridad de manera proactiva y completa para proteger sus dispositivos y datos durante las actividades de clase.</li><li class='pl-2'>Identifica y discute todos los riesgos asociados con el uso de la tecnología, mostrando una actitud ética y crítica sólida.</li><li class='pl-2'>Propone soluciones a los riesgos identificados y las presenta en forma de un informe detallado o una presentación.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Demuestra un uso avanzado y proactivo de medidas de seguridad para proteger sus dispositivos y datos.</li><li class='pl-2'>Identifica y analiza todos los riesgos asociados con el uso de la tecnología, adoptando un enfoque ético y crítico.</li><li class='pl-2'>Propone e implementa soluciones innovadoras a los riesgos identificados, las presenta en forma de un informe detallado o una presentación, y además ayuda a sus compañeros a mejorar su seguridad en el uso de la tecnología.</li></ul>" }
                ]
            },
            {
                id: "c321",
                titulo: "TYD.3.2.1. Idear y diseñar soluciones",
                descripcion: "Idear y diseñar soluciones eficaces, innovadoras y sostenibles a problemas definidos, aplicando conceptos, técnicas y procedimientos interdisciplinares, así como criterios de sostenibilidad, con actitud emprendedora, perseverante y creativa.",
                competencia: 2,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No se le ocurren ni propone soluciones a los problemas que tiene que resolver.</li><li class='pl-2'>No usa lo que sabe de otras asignaturas.</li><li class='pl-2'>No piensa en el medio ambiente.</li><li class='pl-2'>No tiene ganas de hacer las cosas bien ni de mejorar.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Se le ocurren y propone soluciones a los problemas que tiene que resolver, pero le faltan elementos o no están bien hechas.</li><li class='pl-2'>Usa un poco lo que sabe de otras asignaturas, pero no lo suficiente o no lo hace bien.</li><li class='pl-2'>Piensa un poco en el medio ambiente, pero se equivoca o no le da mucha importancia.</li><li class='pl-2'>Tiene pocas ganas de hacer las cosas bien o de mejorar.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Se le ocurren y propone soluciones a los problemas que tiene que resolver, pero son muy simples o parecidas a otras.</li><li class='pl-2'>Usa lo que sabe de otras asignaturas, pero solo lo básico o lo más fácil.</li><li class='pl-2'>Piensa en el medio ambiente, pero solo lo necesario o lo más obvio.</li><li class='pl-2'>Tiene ganas de hacer las cosas bien o de mejorar, pero le cuesta o se confunde a veces.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Se le ocurren y propone soluciones a los problemas que tiene que resolver, y son buenas y diferentes a otras.</li><li class='pl-2'>Usa lo que sabe de otras asignaturas, y lo hace bien y con imaginación.</li><li class='pl-2'>Piensa en el medio ambiente, y lo hace con sentido y coherencia.</li><li class='pl-2'>Tiene ganas de hacer las cosas bien o de mejorar, y sabe lo que tiene que hacer y lo que le conviene.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Se le ocurren y propone soluciones a los problemas que tiene que resolver, y son excelentes y originales.</li><li class='pl-2'>Usa lo que sabe de otras asignaturas, y lo hace con criterio y reflexión.</li><li class='pl-2'>Piensa en el medio ambiente, y lo hace con rigor y argumentos.</li><li class='pl-2'>Tiene ganas de hacer las cosas bien o de mejorar, y valora lo que hace y las consecuencias que tiene.</li></ul>" }
                ]
            },
            {
                id: "c322",
                titulo: "TYD.3.2.2. Seleccionar, planificar y organizar",
                descripcion: "Seleccionar, planificar y organizar los materiales y herramientas, así como las tareas necesarias para la construcción de una solución a un problema planteado, trabajando individualmente o en grupo de manera cooperativa y colaborativa.",
                competencia: 2,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No elige ni prepara lo que necesita para llevar a la práctica una solución al problema que tiene que resolver.</li><li class='pl-2'>No sabe qué hacer ni cómo hacerlo.</li><li class='pl-2'>No trabaja solo ni con otros de forma que se ayudan y se respetan.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Elige y prepara lo que necesita para implementar una solución al problema que tiene que resolver, pero le faltan elementos o no están bien hechos.</li><li class='pl-2'>Sabe un poco qué hacer y cómo hacerlo, pero no lo suficiente o no lo hace bien.</li><li class='pl-2'>Trabaja solo o con otros de forma que se ayudan y se respetan un poco, pero se equivoca o no le da mucha importancia.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Elige y prepara lo que necesita para llevar a la práctica una solución al problema que tiene que resolver, pero con procedimientos muy simples o parecidos a otros.</li><li class='pl-2'>Sabe qué hacer y cómo hacerlo, pero solo lo básico o lo más fácil.</li><li class='pl-2'>Trabaja solo o con otros de forma que se ayudan y se respetan, pero le cuesta o se confunde a veces.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Elige y prepara lo que necesita para llevar a la práctica una solución al problema que tiene que resolver, y con procedimientos buenos y diferentes a otros.</li><li class='pl-2'>Sabe qué hacer y cómo hacerlo, y lo hace bien y con imaginación.</li><li class='pl-2'>Trabaja solo o con otros de forma que se ayudan y se respetan, y sabe lo que tiene que hacer y lo que le conviene.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Elige y prepara lo que necesita para llevar a la práctica una solución al problema que tiene que resolver, y con procedimientos excelentes y originales.</li><li class='pl-2'>Sabe qué hacer y cómo hacerlo, y lo hace con criterio y reflexión.</li><li class='pl-2'>Trabaja solo o con otros de forma que se ayudan y se respetan, y valora lo que hace y las consecuencias que tiene.</li></ul>" }
                ]
            },
            {
                id: "c331",
                titulo: "TYD.3.3.1. Fabricar objetos o modelos",
                descripcion: "Fabricar objetos o modelos mediante la manipulación y conformación de materiales, empleando herramientas y máquinas adecuadas, aplicando los fundamentos de estructuras, mecanismos, electricidad y electrónica y respetando las normas de seguridad y salud correspondientes.",
                competencia: 3,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No fabrica objetos o modelos sencillos que resuelven el problema planteado.</li><li class='pl-2'>No emplea los materiales adecuados ni las herramientas y máquinas elementales necesarias.</li><li class='pl-2'>No aplica los conocimientos básicos de estructuras, mecanismos, electricidad y/o electrónica que se requieren.</li><li class='pl-2'>No respeta las normas de seguridad y salud que se establecen.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Fabrica objetos o modelos sencillos que resuelven el problema planteado de forma parcial o defectuosa.</li><li class='pl-2'>Emplea los materiales, las herramientas y máquinas elementales necesarias de forma insuficiente o incorrecta.</li><li class='pl-2'>Aplica los conocimientos básicos de estructuras, mecanismos, electricidad y/o electrónica que se requieren de forma superficial o errónea.</li><li class='pl-2'>Respeta las normas de seguridad y salud que se establecen de forma escasa o inadecuada.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Fabrica objetos o modelos sencillos que resuelven el problema planteado de forma aceptable pero poco original.</li><li class='pl-2'>Emplea los materiales, las herramientas y máquinas elementales necesarias de forma suficiente pero poco variada.</li><li class='pl-2'>Aplica los conocimientos básicos de estructuras, mecanismos, electricidad y/o electrónica que se requieren de forma correcta pero poco elaborada.</li><li class='pl-2'>Respeta las normas de seguridad y salud que se establecen de forma adecuada pero poco rigurosa.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Fabrica objetos o modelos sencillos que resuelven el problema planteado de forma eficaz e innovadora.</li><li class='pl-2'>Emplea los materiales, las herramientas y máquinas elementales necesarias de forma eficiente y creativa.</li><li class='pl-2'>Aplica los conocimientos básicos de estructuras, mecanismos, electricidad y/o electrónica que se requieren de forma razonada y coherente.</li><li class='pl-2'>Respeta las normas de seguridad y salud que se establecen de forma rigurosa y responsable.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Fabrica objetos o modelos sencillos que resuelven el problema planteado de forma óptima y original.</li><li class='pl-2'>Emplea los materiales, las herramientas y máquinas elementales necesarias de forma crítica y reflexiva.</li><li class='pl-2'>Aplica los conocimientos básicos de estructuras, mecanismos, electricidad y/o electrónica que se requieren de forma rigurosa y argumentada.</li><li class='pl-2'>Respeta las normas de seguridad y salud que se establecen de forma ejemplar e integrada.</li></ul>" }
                ]
            },
            {
                id: "c341",
                titulo: "TYD.3.4.1. Representar y comunicar",
                descripcion: "Representar y comunicar el proceso de creación de un producto, desde su diseño hasta su difusión, elaborando documentación técnica y gráfica con la ayuda de herramientas digitales, empleando los formatos y el vocabulario técnico adecuados, de manera colaborativa, tanto presencialmente como en remoto.",
                competencia: 4,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No representa ni comunica el proceso de creación del producto o lo hace con graves errores e incoherencias.</li><li class='pl-2'>No elabora documentación técnica ni gráfica o lo hace sin seguir las normas.</li><li class='pl-2'>No utiliza herramientas digitales o las utiliza inadecuadamente.</li><li class='pl-2'>No emplea los formatos ni el vocabulario técnico.</li><li class='pl-2'>No trabaja de manera colaborativa ni presencial ni en remoto o muestra una actitud negativa hacia el trabajo en equipo.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Representa y comunica parcialmente el proceso de creación del producto con algunos errores e incoherencias.</li><li class='pl-2'>Elabora documentación técnica y gráfica con dificultades para seguir las normas.</li><li class='pl-2'>Utiliza herramientas digitales con limitaciones o sin aprovechar sus posibilidades.</li><li class='pl-2'>Emplea los formatos y el vocabulario técnico de forma irregular o incompleta.</li><li class='pl-2'>Trabaja de manera colaborativa de forma ocasional o con poca implicación, tanto presencialmente como en remoto.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Representa y comunica el proceso de creación del producto con claridad y coherencia, aunque con algunos aspectos mejorables.</li><li class='pl-2'>Elabora documentación técnica y gráfica siguiendo las normas con corrección.</li><li class='pl-2'>Utiliza herramientas digitales de forma adecuada, aunque sin mucha creatividad.</li><li class='pl-2'>Emplea los formatos y el vocabulario técnico de forma correcta.</li><li class='pl-2'>Trabaja de manera colaborativa de forma habitual y con una implicación básica, tanto presencialmente como en remoto.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Representa y comunica el proceso de creación del producto con claridad, coherencia y detalle, mostrando un buen dominio del tema.</li><li class='pl-2'>Elabora documentación técnica y gráfica siguiendo las normas con rigor y calidad.</li><li class='pl-2'>Utiliza herramientas digitales de forma eficaz y creativa, aprovechando sus posibilidades.</li><li class='pl-2'>Emplea los formatos y el vocabulario técnico de forma precisa y variada.</li><li class='pl-2'>Trabaja de manera colaborativa de forma constante y con compromiso, tanto presencialmente como en remoto.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Representa y comunica el proceso de creación del producto con claridad, coherencia y profundidad, mostrando un excelente dominio del tema.</li><li class='pl-2'>Elabora documentación técnica y gráfica siguiendo las normas con excelencia y originalidad.</li><li class='pl-2'>Utiliza herramientas digitales de forma innovadora y eficiente, explorando nuevas posibilidades.</li><li class='pl-2'>Emplea los formatos y el vocabulario técnico de forma precisa, variada y enriquecedora.</li><li class='pl-2'>Trabaja de manera colaborativa de forma constante, comprometida y solidaria, tanto presencialmente como en remoto.</li></ul>" }
                ]
            },
            {
                id: "c351",
                titulo: "TYD.3.5.1. Describir, interpretar y diseñar soluciones",
                descripcion: "Describir, interpretar y diseñar soluciones a problemas informáticos a través de algoritmos y diagramas de flujo, aplicando los elementos y técnicas de programación de manera creativa.",
                competencia: 5,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No entrega ningún problema, práctica, algoritmo, diagrama de flujo o solución o entrega uno que no tiene sentido o que no cumple con el enunciado.</li><li class='pl-2'>No usa correctamente los elementos y técnicas de programación elementales (variables, operadores, estructuras de control, funciones, etc.).</li><li class='pl-2'>No muestra creatividad en el diseño de soluciones.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un problema, práctica, algoritmo, diagrama de flujo o solución que tiene bastantes errores o que cumple solo algunos requisitos del enunciado.</li><li class='pl-2'>Usa algunos elementos y técnicas de programación elementales (variables, operadores, estructuras de control, funciones, etc.), con dificultad.</li><li class='pl-2'>No muestra creatividad en el diseño de soluciones.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un problema, algoritmo, práctica, diagrama de flujo o solución que tiene algunos errores, pero que cumple con el enunciado.</li><li class='pl-2'>Usa los elementos y técnicas de programación elementales (variables, operadores, estructuras de control, funciones, etc.), con suficiencia.</li><li class='pl-2'>Muestra cierta creatividad en el diseño de soluciones.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un problema, algoritmo, diagrama de flujo o solución que no tiene errores y que cumple con el enunciado y con algunos aspectos adicionales.</li><li class='pl-2'>Usa los elementos y técnicas de programación elementales (variables, operadores, estructuras de control, funciones, etc.), con fluidez.</li><li class='pl-2'>Muestra creatividad en el diseño de soluciones.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un problema, algoritmo, práctica, diagrama de flujo o solución que no tiene errores y que cumple con el enunciado y con varios aspectos adicionales e innovadores.</li><li class='pl-2'>Usa los elementos y técnicas de programación elementales (variables, operadores, estructuras de control, funciones, etc.), con maestría.</li><li class='pl-2'>Muestra una gran creatividad en el diseño de soluciones.</li></ul>" }
                ]
            },
            {
                id: "c352",
                titulo: "TYD.3.5.2. Programar aplicaciones sencillas",
                descripcion: "Programar aplicaciones sencillas para distintos dispositivos como por ejemplo ordenadores, dispositivos y móviles, empleando los elementos de programación de manera apropiada y aplicando herramientas de edición, así como módulos de inteligencia artificial que añadan funcionalidades a la solución.",
                competencia: 5,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No entrega ningún programa o entrega un programa que no funciona o que no cumple con el enunciado.</li><li class='pl-2'>El programa tiene errores sintácticos o lógicos y no usa correctamente las variables, los operadores, las estructuras de control o las funciones.</li><li class='pl-2'>El programa no está depurado, refactorizado ni documentado.</li><li class='pl-2'>El programa no incorpora ningún módulo de inteligencia artificial.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un programa que funciona parcialmente o que cumple solo algunos requisitos del enunciado.</li><li class='pl-2'>El programa tiene muchos errores sintácticos o lógicos y usa algunos elementos de programación básicos de manera inadecuada.</li><li class='pl-2'>El programa está depurado, refactorizado o documentado con errores o de forma incompleta.</li><li class='pl-2'>El programa no incorpora ningún módulo de inteligencia artificial.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un programa que funciona correctamente y que cumple con el enunciado.</li><li class='pl-2'>El programa tiene algunos errores sintácticos o lógicos y usa los elementos de programación básicos de manera apropiada.</li><li class='pl-2'>El programa está depurado, refactorizado y documentado de modo muy básico.</li><li class='pl-2'>El programa incorpora algún módulo de inteligencia artificial como por ejemplo el reconocimiento de texto para interactuar con el usuario.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un programa que funciona correctamente y que cumple con el enunciado y con algunos aspectos adicionales.</li><li class='pl-2'>El programa no tiene errores sintácticos ni lógicos y usa los elementos de programación básicos de manera óptima.</li><li class='pl-2'>El programa está depurado, refactorizado y documentado con eficacia.</li><li class='pl-2'>El programa incorpora varios módulos de inteligencia artificial como por ejemplo el reconocimiento de texto o imágenes para interactuar con el usuario.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un programa que funciona correctamente y que cumple con el enunciado y con varios aspectos adicionales e innovadores.</li><li class='pl-2'>El programa no tiene errores sintácticos ni lógicos y usa los elementos de programación básicos de manera creativa.</li><li class='pl-2'>El programa está depurado, refactorizado y documentado con excelencia.</li><li class='pl-2'>El programa incorpora múltiples módulos de inteligencia artificial como por ejemplo el reconocimiento de voz para interactuar con el usuario, y el aprendizaje automático para adaptarse a las preferencias del usuario.</li></ul>" }
                ]
            },
            {
                id: "c353",
                titulo: "TYD.3.5.3. Automatizar procesos, máquinas y objetos",
                descripcion: "Automatizar procesos, máquinas y objetos de manera autónoma, con conexión a internet, mediante el análisis, construcción y programación de robots y sistemas de control.",
                competencia: 5,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No automatiza procesos, máquinas y objetos de manera autónoma, con conexión a internet, ni analiza, construye ni programa robots y sistemas de control.</li><li class='pl-2'>No presenta evidencias de trabajo en clase relacionadas con este criterio, como por ejemplo, un robot o un sistema de control que no se ha construido ni programado.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Automatiza de forma superficial procesos, máquinas y objetos de manera autónoma, con conexión a internet, pero no analiza, construye ni programa adecuadamente robots y sistemas de control.</li><li class='pl-2'>Presenta evidencias de trabajo en clase incompletas o poco elaboradas, como por ejemplo, un robot o un sistema de control que se ha construido y programado siguiendo unas instrucciones sin comprender su funcionamiento o su utilidad.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Automatiza de forma adecuada procesos, máquinas y objetos de manera autónoma, con conexión a internet, y analiza, construye y programa correctamente robots y sistemas de control.</li><li class='pl-2'>Presenta evidencias de trabajo en clase suficientes y correctas, como por ejemplo, un robot o un sistema de control que se ha construido y programado siguiendo unas instrucciones y comprendiendo su funcionamiento y su utilidad para resolver un problema concreto.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Automatiza de forma amplia y detallada procesos, máquinas y objetos de manera autónoma, con conexión a internet, y analiza, construye y programa con solvencia robots y sistemas de control.</li><li class='pl-2'>Presenta evidencias de trabajo en clase completas y bien estructuradas, como por ejemplo, un robot o un sistema de control que se ha construido y programado adaptando unas instrucciones o creando unas propias y explicando su funcionamiento y su utilidad para resolver un problema concreto o mejorar una situación existente.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Automatiza de forma crítica y reflexiva procesos, máquinas y objetos de manera autónoma, con conexión a internet, y analiza, construye y programa con creatividad robots y sistemas de control.</li><li class='pl-2'>Presenta evidencias de trabajo en clase excelentes y creativas, como por ejemplo, un robot o un sistema de control que se ha construido y programado creando unas instrucciones propias e innovadoras y justificando su funcionamiento y su utilidad para resolver un problema concreto o mejorar una situación existente con criterios de sostenibilidad.</li></ul>" }
                ]
            },
            {
                id: "c361",
                titulo: "TYD.3.6.1. Hacer un uso eficiente y seguro",
                descripcion: "Hacer un uso eficiente y seguro de los dispositivos digitales de uso cotidiano en la resolución de problemas sencillos, analizando los componentes y los sistemas de comunicación, conociendo los riesgos y adoptando medidas de seguridad para la protección de datos y equipos.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No usa los dispositivos digitales o los usa de forma inadecuada o irresponsable para resolver problemas sencillos.</li><li class='pl-2'>No identifica ni describe los componentes ni los sistemas de comunicación de los dispositivos digitales.</li><li class='pl-2'>No reconoce ni evita los riesgos asociados al uso de los dispositivos digitales.</li><li class='pl-2'>No aplica ni respeta las medidas de seguridad para la protección de datos y equipos.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Usa los dispositivos digitales con dificultad o sin criterio para resolver problemas sencillos.</li><li class='pl-2'>Identifica o describe algunos componentes o sistemas de comunicación de los dispositivos digitales.</li><li class='pl-2'>Reconoce o evita algunos riesgos asociados al uso de los dispositivos digitales.</li><li class='pl-2'>Aplica o respeta algunas medidas de seguridad para la protección de datos y equipos.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Usa los dispositivos digitales con solvencia y con criterio para resolver problemas sencillos.</li><li class='pl-2'>Identifica y describe correctamente los componentes y los sistemas de comunicación de los dispositivos digitales.</li><li class='pl-2'>Reconoce y evita correctamente los riesgos asociados al uso de los dispositivos digitales.</li><li class='pl-2'>Aplica y respeta correctamente las medidas de seguridad para la protección de datos y equipos.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Usa los dispositivos digitales con fluidez y con criterio para resolver problemas sencillos y algunos aspectos adicionales.</li><li class='pl-2'>Identifica y describe con precisión los componentes y los sistemas de comunicación de los dispositivos digitales.</li><li class='pl-2'>Reconoce y evita con precisión los riesgos asociados al uso de los dispositivos digitales.</li><li class='pl-2'>Aplica y respeta con precisión las medidas de seguridad para la protección de datos y equipos.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Usa los dispositivos digitales con maestría y criterio para resolver problemas sencillos y varios aspectos adicionales e innovadores.</li><li class='pl-2'>Identifica y describe con detalle y rigor los componentes y los sistemas de comunicación de los dispositivos digitales.</li><li class='pl-2'>Reconoce y evita con detalle y rigor los riesgos asociados al uso de los dispositivos digitales.</li><li class='pl-2'>Aplica y respeta con detalle y rigor las medidas de seguridad para la protección de datos y equipos.</li></ul>" }
                ]
            },
            {
                id: "c362",
                titulo: "TYD.3.6.2. Crear contenidos y elaborar materiales",
                descripcion: "Crear contenidos, elaborar materiales y difundirlos en distintas plataformas, configurando correctamente las herramientas digitales habituales del entorno de aprendizaje, ajustándolas a sus necesidades y respetando los derechos de autor y la etiqueta digital.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No ha realizado ninguna de las tareas asignadas (presentación digital, infografía, blog, podcast o vídeo corto).</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un contenido o material que tiene algunos errores o que cumple solo algunos requisitos del enunciado.</li><li class='pl-2'>Ha intentado realizar las tareas asignadas pero con evidentes dificultades y no ha conseguido completar ninguna de ellas de manera satisfactoria.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un contenido o material que no tiene errores y que cumple con el enunciado de modo muy básico.</li><li class='pl-2'>Ha creado y compartido en la plataforma de aprendizaje una presentación digital o una infografía sobre un tema estudiado en clase, con información relevante y bien organizada.</li><li class='pl-2'>Ha respetado los derechos de autor y ha demostrado conocer la etiqueta digital.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un contenido o material que no tiene errores y que cumple con el enunciado y con algunos aspectos adicionales.</li><li class='pl-2'>El estudiante ha creado un blog con entradas relevantes, utilizando de forma correcta y eficiente las herramientas digitales, y respetando los derechos de autor y la etiqueta digital.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Entrega un contenido o material que no tiene errores y que cumple con el enunciado y con varios aspectos adicionales e innovadores.</li><li class='pl-2'>El estudiante ha producido un podcast o vídeo corto con contenido relevante y de calidad, haciendo uso avanzado de las herramientas digitales y respetando siempre los derechos de autor y la etiqueta digital.</li></ul>" }
                ]
            },
            {
                id: "c363",
                titulo: "TYD.3.6.3. Organizar la información",
                descripcion: "Organizar la información de manera estructurada, aplicando técnicas de almacenamiento seguro.",
                competencia: 6,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No organiza la información o lo hace de forma caótica y sin criterio.</li><li class='pl-2'>Guarda todos los archivos en el escritorio sin orden ni concierto; no respalda los archivos; no protege los archivos con contraseñas o antivirus.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Organiza la información de forma parcial o incompleta, sin seguir una estructura clara o coherente.</li><li class='pl-2'>Aplica técnicas de almacenamiento seguro de forma parcial o incompleta, sin tener en cuenta aspectos como el formato, el nombre, la ubicación o la protección de los archivos.</li><li class='pl-2'>Guarda los archivos en carpetas pero sin un criterio lógico o uniforme.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Organiza la información de forma adecuada, siguiendo una estructura básica y coherente.</li><li class='pl-2'>Aplica técnicas de almacenamiento seguro de forma adecuada, teniendo en cuenta aspectos como el formato, el nombre, la ubicación o la protección de los archivos.</li><li class='pl-2'>Guarda los archivos en carpetas según el tipo o el tema y les asigna nombres descriptivos; protege los archivos con contraseñas seguras o antivirus actualizados.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Organiza la información de forma óptima, siguiendo una estructura clara, coherente y adaptada al propósito.</li><li class='pl-2'>Aplica técnicas de almacenamiento seguro de forma óptima, teniendo en cuenta aspectos como el formato, el nombre, la ubicación o la protección de los archivos y utilizando herramientas adecuadas para ello.</li><li class='pl-2'>Guarda los archivos en carpetas según el tipo o el tema y les asigna nombres descriptivos que incluyen datos relevantes como la fecha o el autor; protege los archivos con contraseñas seguras.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Organiza la información de forma excelente, siguiendo una estructura clara, coherente, adaptada al propósito y con elementos que facilitan su comprensión.</li><li class='pl-2'>Aplica técnicas de almacenamiento seguro de forma excelente, teniendo en cuenta aspectos como el formato, el nombre, la ubicación o la protección de los archivos y utilizando herramientas adecuadas y avanzadas para ello.</li><li class='pl-2'>Guarda los archivos en carpetas según el tipo o el tema y les asigna nombres descriptivos que incluyen datos relevantes como la fecha o el autor; además utiliza etiquetas o colores para clasificarlos según su importancia o estado; protege los archivos con un gestor de contraseñas seguras.</li></ul>" }
                ]
            },
            {
                id: "c371",
                titulo: "TYD.3.7.1. Reconocer la influencia de la actividad tecnológica",
                descripcion: "Reconocer la influencia de la actividad tecnológica en la sociedad y en la sostenibilidad ambiental, a lo largo de su historia, identificando sus aportaciones y repercusiones y valorando su importancia para el desarrollo sostenible, contextualizando sus aplicaciones en nuestra comunidad.",
                competencia: 7,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No reconoce la influencia de la actividad tecnológica en la sociedad y en el medio ambiente, ni identifica sus aportaciones y repercusiones, ni valora su importancia para el desarrollo sostenible.</li><li class='pl-2'>No contextualiza sus aplicaciones en nuestra comunidad.</li><li class='pl-2'>No presenta evidencias de trabajo en clase relacionadas con este criterio.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce de forma superficial la influencia de la actividad tecnológica en la sociedad y en el medio ambiente, e identifica algunas de sus aportaciones y repercusiones, pero no las valora adecuadamente ni las relaciona con el desarrollo sostenible.</li><li class='pl-2'>Contextualiza de forma limitada sus aplicaciones en nuestra comunidad.</li><li class='pl-2'>Presenta evidencias de trabajo en clase incompletas o poco elaboradas, como un listado de inventos tecnológicos sin explicar su impacto social o ambiental.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce de forma adecuada la influencia de la actividad tecnológica en la sociedad y en el medio ambiente, e identifica las principales aportaciones y repercusiones, valorando su importancia para el desarrollo sostenible.</li><li class='pl-2'>Contextualiza correctamente sus aplicaciones en nuestra comunidad.</li><li class='pl-2'>Presenta evidencias de trabajo en clase suficientes y correctas, como un mapa conceptual o una línea del tiempo que muestra la evolución de la tecnología y su influencia en la sociedad y el medio ambiente.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce de forma amplia y detallada la influencia de la actividad tecnológica en la sociedad y en el medio ambiente, e identifica las aportaciones y repercusiones más relevantes, valorando su importancia para el desarrollo sostenible y proponiendo acciones para mejorar la situación actual.</li><li class='pl-2'>Contextualiza con ejemplos variados sus aplicaciones en nuestra comunidad.</li><li class='pl-2'>Presenta evidencias de trabajo en clase completas y bien estructuradas, como un informe o una presentación multimedia que analiza la actividad tecnológica desde una perspectiva histórica, social y ambiental.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Reconoce de forma crítica y reflexiva la influencia de la actividad tecnológica en la sociedad y en el medio ambiente, e identifica las aportaciones y repercusiones más significativas, valorando su importancia para el desarrollo sostenible y mostrando una actitud comprometida con el mismo.</li><li class='pl-2'>Contextualiza con ejemplos originales y creativos sus aplicaciones en nuestra comunidad.</li><li class='pl-2'>Presenta evidencias de trabajo en clase excelentes y creativas, como un proyecto o una exposición oral que demuestra un conocimiento profundo y crítico de la actividad tecnológica y su impacto social y ambiental.</li></ul>" }
                ]
            },
            {
                id: "c372",
                titulo: "TYD.3.7.2. Identificar las aportaciones básicas",
                descripcion: "Identificar las aportaciones básicas de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental del entorno más cercano, en especial de Andalucía, haciendo un uso responsable y ético de las mismas.",
                competencia: 7,
                niveles: [
                    { nivel: "(1-2.9)", color: "bg-red-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>No identifica las aportaciones de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental, ni hace un uso responsable y ético de las mismas, en el entorno más cercano.</li><li class='pl-2'>No presenta evidencias de trabajo en clase relacionadas con este criterio.</li></ul>" },
                    { nivel: "(3-4.9)", color: "bg-orange-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica de forma superficial algunas aportaciones de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental, pero no hace un uso responsable y ético de las mismas, en el entorno más cercano.</li><li class='pl-2'>Presenta evidencias de trabajo en clase incompletas o poco elaboradas, como un listado de tecnologías emergentes sin explicar su relación con el desarrollo sostenible.</li></ul>" },
                    { nivel: "(5-6.9)", color: "bg-yellow-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica de forma adecuada las principales aportaciones de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental, y hace un uso responsable y ético de las mismas, en el entorno más cercano.</li><li class='pl-2'>Presenta evidencias de trabajo en clase suficientes y correctas, como un mapa conceptual o una ficha que resume las características y beneficios de una tecnología emergente para el desarrollo sostenible.</li></ul>" },
                    { nivel: "(7-8.9)", color: "bg-green-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica de forma amplia y detallada las aportaciones más relevantes de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental, y hace un uso responsable y ético de las mismas, en el entorno más cercano.</li><li class='pl-2'>Presenta evidencias de work en clase completas y bien estructuradas, como un informe o una presentación multimedia que compara varias tecnologías emergentes y su contribución al desarrollo sostenible.</li></ul>" },
                    { nivel: "(9-10)", color: "bg-blue-50", descriptor: "<ul class='list-disc list-inside space-y-1'><li class='pl-2'>Identifica de forma crítica y reflexiva las aportaciones más significativas de las tecnologías emergentes al bienestar, a la igualdad social y a la disminución del impacto ambiental, y hace un uso responsable y ético de las mismas, en el entorno más cercano.</li><li class='pl-2'>Presenta evidencias de trabajo en clase excelentes y creativas, como un proyecto o una exposición oral que propone una solución innovadora y sostenible basada en una tecnología emergente para un problema real del entorno más cercano.</li></ul>" }
                ]
            }
        ];

        // Definición de competencias específicas
        const competenciasData = [
            {
                id: 1,
                titulo: "TYD.3.1. Buscar y seleccionar la información adecuada",
                descripcion: "Buscar y seleccionar la información adecuada proveniente de diversas fuentes, de manera crítica y segura, aplicando procesos de investigación, métodos de análisis de productos y experimentando con herramientas de simulación, para definir problemas tecnológicos e iniciar procesos de creación de soluciones a partir de la información obtenida.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 2,
                titulo: "TYD.3.2. Abordar problemas tecnológicos",
                descripcion: "Abordar problemas tecnológicos con autonomía y actitud creativa, aplicando conocimientos interdisciplinares y trabajando de forma cooperativa y colaborativa, para diseñar y planificar soluciones a un problema o necesidad de forma eficaz, innovadora y sostenible.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 3,
                titulo: "TYD.3.3. Aplicar técnicas y conocimientos interdisciplinares",
                descripcion: "Aplicar de forma apropiada y segura distintas técnicas y conocimientos interdisciplinares, utilizando operadores, sistemas tecnológicos y herramientas, teniendo en cuenta la planificación y el diseño previo para construir o fabricar soluciones tecnológicas y sostenibles que den respuesta a necesidades en diferentes contextos.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 4,
                titulo: "TYD.3.4. Describir, representar e intercambiar ideas",
                descripcion: "Describir, representar e intercambiar ideas o soluciones a problemas tecnológicos o digitales, utilizando medios de representación, simbología y vocabulario adecuados, así como los instrumentos y recursos disponibles, valorando la utilidad de las herramientas digitales para comunicar y difundir información y propuestas.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 5,
                titulo: "TYD.3.5. Desarrollar algoritmos y aplicaciones informáticas",
                descripcion: "Desarrollar algoritmos y aplicaciones informáticas en distintos entornos, aplicando los principios del pensamiento computacional e incorporando las tecnologías emergentes, para crear soluciones a problemas concretos, automatizar procesos y aplicarlos en sistemas de control o en robótica.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 6,
                titulo: "TYD.3.6. Comprender los fundamentos del funcionamiento",
                descripcion: "Comprender los fundamentos del funcionamiento de los dispositivos y aplicaciones habituales de su entorno digital de aprendizaje, analizando sus componentes y funciones y ajustándolos a sus necesidades para hacer un uso más eficiente y seguro de los mismos y para detectar y resolver problemas técnicos sencillos.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293A1 1 0 0118 6v10a1 1 0 01-.293.707L14 18.414V5.586l3.707-3.293z" clip-rule="evenodd" />
                </svg>`
            },
            {
                id: 7,
                titulo: "TYD.3.7. Hacer un uso responsable y ético",
                descripcion: "Hacer un uso responsable y ético de la tecnología, mostrando interés por un desarrollo sostenible, identificando sus repercusiones y valorando la contribución de las tecnologías emergentes para identificar las aportaciones y el impacto del desarrollo tecnológico en la sociedad y en el entorno, contextualizando sus aplicaciones en nuestra comunidad.",
                icono: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>`
            }
        ];
        
        // =========================================================================
        // === FIN DE LA ZONA DE EDICIÓN DE DATOS ===
        // =========================================================================
        

        // --- LÓGICA DE LA APLICACIÓN ---

        // Elementos de la pantalla principal
        const mainScreenEl = document.getElementById('main-screen');
        const btnCompetenciasEl = document.getElementById('btn-competencias');
        const btnMultipleEl = document.getElementById('btn-multiple');

        // Elementos de la pantalla de competencias
        const competenciasScreenEl = document.getElementById('competencias-screen');
        const competenciasListaEl = document.getElementById('competencias-lista');
        const rubricsContainerCompetenciasEl = document.getElementById('rubrics-container-competencias');
        const welcomeMessageCompetenciasEl = document.getElementById('welcome-message-competencias');
        const exportContainerCompetenciasEl = document.getElementById('export-container-competencias');
        const exportButtonCompetenciasEl = document.getElementById('export-csv-button-competencias');
        const backFromCompetenciasEl = document.getElementById('back-from-competencias');
        const mobileMenuBtnCompetenciasEl = document.getElementById('mobile-menu-btn-competencias');
        const sidebarCompetenciasEl = document.getElementById('sidebar-competencias');
        const closeSidebarCompetenciasEl = document.getElementById('close-sidebar-competencias');
        const overlayCompetenciasEl = document.getElementById('overlay-competencias');

        // Elementos de la pantalla de selección múltiple
        const multipleScreenEl = document.getElementById('multiple-screen');
        const criteriosListaEl = document.getElementById('criterios-lista');
        const rubricsContainerEl = document.getElementById('rubrics-container');
        const welcomeMessageEl = document.getElementById('welcome-message');
        const exportContainerEl = document.getElementById('export-container');
        const exportButtonEl = document.getElementById('export-csv-button');
        const backFromMultipleEl = document.getElementById('back-from-multiple');
        const mobileMenuBtnMultipleEl = document.getElementById('mobile-menu-btn-multiple');
        const sidebarMultipleEl = document.getElementById('sidebar-multiple');
        const closeSidebarMultipleEl = document.getElementById('close-sidebar-multiple');
        const overlayMultipleEl = document.getElementById('overlay-multiple');

        // Estado para guardar las selecciones
        let selectedCompetencia = null;
        let selectedCriterios = [];

        /**
         * Inicializa la aplicación cuando el DOM está cargado.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // Configurar eventos de navegación
            btnCompetenciasEl.addEventListener('click', showCompetenciasScreen);
            btnMultipleEl.addEventListener('click', showMultipleScreen);
            backFromCompetenciasEl.addEventListener('click', showMainScreen);
            backFromMultipleEl.addEventListener('click', showMainScreen);
            
            // Eventos para menú móvil - competencias
            mobileMenuBtnCompetenciasEl.addEventListener('click', () => {
                sidebarCompetenciasEl.classList.add('open');
                overlayCompetenciasEl.classList.add('open');
            });
            
            closeSidebarCompetenciasEl.addEventListener('click', closeSidebarCompetencias);
            overlayCompetenciasEl.addEventListener('click', closeSidebarCompetencias);
            
            // Eventos para menú móvil - múltiple
            mobileMenuBtnMultipleEl.addEventListener('click', () => {
                sidebarMultipleEl.classList.add('open');
                overlayMultipleEl.classList.add('open');
            });
            
            closeSidebarMultipleEl.addEventListener('click', closeSidebarMultiple);
            overlayMultipleEl.addEventListener('click', closeSidebarMultiple);
            
            // Inicializar pantallas
            populateCompetenciasSidebar();
            populateCriteriosSidebar();

            // ===== INICIO: CÓDIGO MODIFICADO =====
            // Se actualizan los listeners para que lean el formato del selector
            
            exportButtonEl.addEventListener('click', () => {
                const format = document.getElementById('export-format-multiple').value;
                const criteriaToExport = rubricasData.filter(c => selectedCriterios.includes(c.id));
                generateAndDownloadCSV(criteriaToExport, format);
            });
            
            exportButtonCompetenciasEl.addEventListener('click', () => {
                const format = document.getElementById('export-format-competencias').value;
                const criteriaToExport = rubricasData.filter(c => c.competencia == selectedCompetencia);
                generateAndDownloadCSV(criteriaToExport, format);
            });
            // ===== FIN: CÓDIGO MODIFICADO =====
        });

        /**
         * Cierra el sidebar en la pantalla de competencias
         */
        function closeSidebarCompetencias() {
            sidebarCompetenciasEl.classList.remove('open');
            overlayCompetenciasEl.classList.remove('open');
        }

        /**
         * Cierra el sidebar en la pantalla de selección múltiple
         */
        function closeSidebarMultiple() {
            sidebarMultipleEl.classList.remove('open');
            overlayMultipleEl.classList.remove('open');
        }

        /**
         * Muestra la pantalla principal.
         */
        function showMainScreen() {
            mainScreenEl.style.display = 'flex';
            competenciasScreenEl.style.display = 'none';
            multipleScreenEl.style.display = 'none';
            
            // Cerrar sidebars si están abiertos
            closeSidebarCompetencias();
            closeSidebarMultiple();
        }

        /**
         * Muestra la pantalla de competencias.
         */
        function showCompetenciasScreen() {
            mainScreenEl.style.display = 'none';
            competenciasScreenEl.style.display = 'flex';
            multipleScreenEl.style.display = 'none';
            
            // Reiniciar selección
            selectedCompetencia = null;
            renderSelectedCompetenciaRubrics();
            
            // Cerrar sidebar si está abierto
            closeSidebarCompetencias();
        }

        /**
         * Muestra la pantalla de selección múltiple.
         */
        function showMultipleScreen() {
            mainScreenEl.style.display = 'none';
            competenciasScreenEl.style.display = 'none';
            multipleScreenEl.style.display = 'flex';
            
            // Reiniciar selección
            selectedCriterios = [];
            renderSelectedRubrics();
            
            // Cerrar sidebar si está abierto
            closeSidebarMultiple();
        }

        /**
         * Rellena la barra lateral con los botones de las competencias.
         */
        function populateCompetenciasSidebar() {
            if (!competenciasListaEl) return;
            
            competenciasListaEl.innerHTML = '';
            
            competenciasData.forEach(competencia => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                // Cambiado el color de fondo para distinguir competencias específicas
                button.className = "w-full text-left py-2 md:py-2.5 px-4 rounded-lg bg-blue-50 text-blue-800 hover:bg-blue-100 hover:text-blue-900 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center gap-1 md:gap-2 break-words";
                button.innerHTML = `${competencia.icono}<span class="text-sm md:text-base">${competencia.titulo}</span>`;
                button.setAttribute('data-id', competencia.id);
                
                button.addEventListener('click', () => {
                    toggleCompetencia(competencia.id, button);
                    // En móvil, cerrar el sidebar después de seleccionar
                    if (window.innerWidth < 768) {
                        closeSidebarCompetencias();
                    }
                });
                
                li.appendChild(button);
                competenciasListaEl.appendChild(li);
            });
        }

        /**
         * Rellena la barra lateral con los botones de los criterios.
         */
        function populateCriteriosSidebar() {
            if (!criteriosListaEl) return;
            
            criteriosListaEl.innerHTML = '';
            
            rubricasData.forEach(criterio => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                // Mantenido el estilo original para los criterios
                button.className = "w-full text-left py-2 md:py-2.5 px-4 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-blue-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center gap-1 md:gap-2 break-words";
                
                // Añadir icono según el tipo de criterio
                let iconoHTML = '';
                if (criterio.titulo.includes('Definir') || criterio.titulo.includes('Comprender') || criterio.titulo.includes('Adoptar')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                    </svg>`;
                } else if (criterio.titulo.includes('Idear') || criterio.titulo.includes('Seleccionar') || criterio.titulo.includes('Fabricar')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
                    </svg>`;
                } else if (criterio.titulo.includes('Representar') || criterio.titulo.includes('Describir') || criterio.titulo.includes('Programar')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                    </svg>`;
                } else if (criterio.titulo.includes('Automatizar') || criterio.titulo.includes('Hacer') || criterio.titulo.includes('Crear') || criterio.titulo.includes('Organizar') || criterio.titulo.includes('Reconocer') || criterio.titulo.includes('Identificar')) {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>`;
                } else {
                    iconoHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 md:h-4 md:w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                    </svg>`;
                }
                
                button.innerHTML = `${iconoHTML}<span class="text-sm md:text-base">${criterio.titulo}</span>`;
                button.setAttribute('data-id', criterio.id);
                
                button.addEventListener('click', () => {
                    toggleCriterio(criterio.id, button);
                    // En móvil, cerrar el sidebar después de seleccionar
                    if (window.innerWidth < 768) {
                        closeSidebarMultiple();
                    }
                });
                
                li.appendChild(button);
                criteriosListaEl.appendChild(li);
            });
        }

        /**
         * Selecciona una competencia y actualiza la vista.
         */
        function toggleCompetencia(competenciaId, buttonEl) {
            // Si ya está seleccionada, deseleccionar
            if (selectedCompetencia === competenciaId) {
                selectedCompetencia = null;
                updateButtonStyle(buttonEl, false, 'competencia');
            } else {
                // Deseleccionar cualquier competencia anterior
                const buttons = competenciasListaEl.querySelectorAll('button');
                buttons.forEach(btn => {
                    updateButtonStyle(btn, false, 'competencia');
                });
                
                // Seleccionar la nueva competencia
                selectedCompetencia = competenciaId;
                updateButtonStyle(buttonEl, true, 'competencia');
            }
            
            renderSelectedCompetenciaRubrics();
        }

        /**
         * Añade o quita un criterio de la selección y actualiza la vista.
         */
        function toggleCriterio(criterioId, buttonEl) {
            const index = selectedCriterios.indexOf(criterioId);
            
            if (index > -1) {
                selectedCriterios.splice(index, 1);
                updateButtonStyle(buttonEl, false, 'criterio');
            } else {
                selectedCriterios.push(criterioId);
                updateButtonStyle(buttonEl, true, 'criterio');
            }
            
            renderSelectedRubrics();
        }

        /**
         * Actualiza el estado visual de un botón (activo o inactivo).
         */
        function updateButtonStyle(buttonEl, isActive, type) {
            if (type === 'competencia') {
                if (isActive) {
                    buttonEl.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.remove('bg-blue-50', 'text-blue-800', 'hover:bg-blue-100', 'hover:text-blue-900');
                } else {
                    buttonEl.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.add('bg-blue-50', 'text-blue-800', 'hover:bg-blue-100', 'hover:text-blue-900');
                }
            } else { // criterio
                if (isActive) {
                    buttonEl.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.remove('text-gray-700', 'hover:bg-gray-100', 'hover:text-blue-600');
                } else {
                    buttonEl.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
                    buttonEl.classList.add('text-gray-700', 'hover:bg-gray-100', 'hover:text-blue-600');
                }
            }
        }

        /**
         * Renderiza las rúbricas de la competencia seleccionada en el panel principal.
         */
        function renderSelectedCompetenciaRubrics() {
            rubricsContainerCompetenciasEl.innerHTML = '';
            
            if (selectedCompetencia === null) {
                welcomeMessageCompetenciasEl.style.display = 'block';
                exportContainerCompetenciasEl.style.display = 'none';
            } else {
                welcomeMessageCompetenciasEl.style.display = 'none';
                exportContainerCompetenciasEl.style.display = 'block';
                
                // Encontrar la competencia seleccionada
                const competencia = competenciasData.find(c => c.id == selectedCompetencia);
                
                // Añadir información de la competencia con el mismo formato azul que el botón seleccionado
                const competenciaHTML = `
                    <div class="bg-blue-600 text-white p-4 md:p-5 lg:p-8 rounded-xl shadow-lg transition-all duration-300 mb-6 md:mb-8">
                        <h2 class="text-xl md:text-2xl lg:text-3xl font-bold mb-3">${competencia.titulo}</h2>
                        <p class="text-sm md:text-base text-blue-100">${competencia.descripcion}</p>
                    </div>
                `;
                rubricsContainerCompetenciasEl.innerHTML += competenciaHTML;
                
                // Añadir los criterios de esta competencia
                rubricasData.forEach(criterio => {
                    if (criterio.competencia == selectedCompetencia) {
                        const rubricHTML = createRubricHTML(criterio);
                        rubricsContainerCompetenciasEl.innerHTML += rubricHTML;
                    }
                });
            }
        }

        /**
         * Renderiza las rúbricas de todos los criterios seleccionados en el panel principal.
         */
        function renderSelectedRubrics() {
            rubricsContainerEl.innerHTML = '';
            
            if (selectedCriterios.length === 0) {
                welcomeMessageEl.style.display = 'block';
                exportContainerEl.style.display = 'none';
            } else {
                welcomeMessageEl.style.display = 'none';
                exportContainerEl.style.display = 'block';
                
                rubricasData.forEach(criterio => {
                    if (selectedCriterios.includes(criterio.id)) {
                        const rubricHTML = createRubricHTML(criterio);
                        rubricsContainerEl.innerHTML += rubricHTML;
                    }
                });
            }
        }

        /**
         * Crea el string HTML para una tarjeta de rúbrica completa.
         */
        function createRubricHTML(criterio) {
            let headHTML = '<tr class="divide-x divide-gray-200">';
            criterio.niveles.forEach(nivel => {
                headHTML += `<th class="rubric-cell py-2 px-2 md:py-4 md:px-4 text-xs md:text-sm font-medium text-gray-800 align-top ${nivel.color} w-1/5">${nivel.nivel}</th>`;
            });
            headHTML += '</tr>';

            let bodyHTML = '<tr class="divide-x divide-gray-200">';
            criterio.niveles.forEach(nivel => {
                bodyHTML += `<td class="rubric-cell py-2 px-2 md:py-4 md:px-4 text-xs md:text-sm text-gray-600 align-top ${nivel.color} w-1/5">${nivel.descriptor}</td>`;
            });
            bodyHTML += '</tr>';
            
            const fullHTML = `
                <div class="bg-white p-4 md:p-5 lg:p-8 rounded-xl shadow-lg transition-all duration-300">
                    <h2 class="text-xl md:text-2xl lg:text-3xl font-bold text-blue-700 mb-3">${criterio.titulo}</h2>
                    <p class="text-sm md:text-base text-gray-600 mb-6 pb-4 md:mb-8 md:pb-6 border-b border-gray-200">${criterio.descripcion}</p>
                    <div class="overflow-x-auto">
                        <table class="rubric-table min-w-full border border-gray-200 divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                ${headHTML}
                            </thead>
                            <tbody class="bg-white">
                                ${bodyHTML}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            return fullHTML;
        }

        // ===== INICIO: BLOQUE DE CÓDIGO MODIFICADO/AÑADIDO =====
        // Se eliminan las funciones exportToClassroomCSV y exportToClassroomCSVCompetencias
        // y se reemplazan por estas tres funciones nuevas:

        // --- FUNCIONES DE EXPORTACIÓN ---

        /**
         * Limpia un string HTML y lo formatea para CSV, encerrándolo entre comillas.
         */
        function cleanDescriptor(htmlString) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            const textoPlano = tempDiv.textContent || tempDiv.innerText || '';
            // Limpiar saltos de línea y espacios múltiples, y escapar comillas
            const textoLimpio = textoPlano.replace(/\s+/g, ' ').trim();
            return `"${textoLimpio.replace(/"/g, '""')}"`;
        }
        
        /**
         * Genera las líneas de puntos y descriptores según el formato seleccionado.
         */
        function getExportData(format, nivelesInvertidos) {
            let puntosLinea = "\t";
            let descriptoresLinea = "\t";
        
            // Extraer descriptores limpios (Alto a Bajo)
            const desc_10 = cleanDescriptor(nivelesInvertidos[0].descriptor); // (9-10)
            const desc_8_9 = cleanDescriptor(nivelesInvertidos[1].descriptor); // (7-8.9)
            const desc_5_6 = cleanDescriptor(nivelesInvertidos[2].descriptor); // (5-6.9)
            const desc_3_4 = cleanDescriptor(nivelesInvertidos[3].descriptor); // (3-4.9)
            const desc_1_2 = cleanDescriptor(nivelesInvertidos[4].descriptor); // (1-2.9)
            const desc_0 = `"No entregado"`;
        
            switch(String(format)) {
                case '1': // 1) 10, 8, 6, 4, 2 (5 niveles)
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}`;
                    break;
                case '2': // 2) 10, 8, 6, 4, 2, 0 (6 niveles)
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0\t0.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}\t${desc_0}`;
                    break;
                case '3': // 3) 10, 8.5, 7.5, 6.5, 5.5, 4.5, 3.5, 2.5, 1.5 (9 niveles)
                    puntosLinea += "10.0\t8.5\t7.5\t6.5\t5.5\t4.5\t3.5\t2.5\t1.5";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_8_9}\t${desc_5_6}\t${desc_5_6}\t${desc_3_4}\t${desc_3_4}\t${desc_1_2}\t${desc_1_2}`;
                    break;
                case '4': // 4) 10, 8.5, 7.5 ... 1.5, 0 (10 niveles)
                    puntosLinea += "10.0\t8.5\t7.5\t6.5\t5.5\t4.5\t3.5\t2.5\t1.5\t0.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_8_9}\t${desc_5_6}\t${desc_5_6}\t${desc_3_4}\t${desc_3_4}\t${desc_1_2}\t${desc_1_2}\t${desc_0}`;
                    break;
                default: // Fallback a la opción 1
                    puntosLinea += "10.0\t8.0\t6.0\t4.0\t2.0";
                    descriptoresLinea += `${desc_10}\t${desc_8_9}\t${desc_5_6}\t${desc_3_4}\t${desc_1_2}`;
            }
            
            return { puntosLinea, descriptoresLinea };
        }

        /**
         * Función genérica para generar y descargar un archivo CSV con el formato de Google Classroom.
         * @param {Array} criteriaList - La lista de objetos de criterio a exportar.
         * @param {string} format - El ID del formato ('1', '2', '3', o '4').
         */
        function generateAndDownloadCSV(criteriaList, format) {
            // Cabeceras fijas
            let csvRows = [
                "Se recomienda no editar las guías de evaluación en formato de hoja de cálculo",
                "v1.0-s"
            ];
        
            if (!criteriaList || criteriaList.length === 0) {
                alert("No hay criterios seleccionados para exportar.");
                return;
            }
        
            // Procesar cada criterio
            criteriaList.forEach(criterio => {
                // Título abreviado
                const tituloAbreviado = getTituloAbreviado(criterio.titulo);
                csvRows.push(tituloAbreviado);
                
                // Descripción completa
                csvRows.push(criterio.descripcion);
                
                // Invertir niveles (de más alto a más bajo)
                const nivelesInvertidos = [...criterio.niveles].reverse();
                
                // Obtener líneas de puntos y descriptores según el formato
                const { puntosLinea, descriptoresLinea } = getExportData(format, nivelesInvertidos);
                
                csvRows.push(puntosLinea);
                csvRows.push(descriptoresLinea);
                
                // Línea vacía
                csvRows.push("");
            });
        
            // Crear y descargar el archivo
            const csvString = csvRows.join('\n');
            const BOM = '\uFEFF'; // Byte Order Mark para UTF-8
            const blob = new Blob([BOM + csvString], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'rubricas_tecnologia_digitalizacion_classroom.csv');
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        
            // Mostrar confirmación con los pasos correctos
            setTimeout(() => {
                alert(`Se han exportado ${criteriaList.length} criterio(s) correctamente.\n\nSiguientes pasos:\n\n1) Exporta el .csv desde la aplicación\n2) Abre una Google Sheet en blanco\n3) Importa el archivo .csv a la Google Sheet\n4) Renombra la Google Sheet, por ejemplo, a "Rúbrica para importar"\n5) Importa la rúbrica desde Classroom`);
            }, 500);
        }

        // ===== FIN: BLOQUE DE CÓDIGO MODIFICADO/AÑADIDO =====

        /**
         * Convierte el título completo en un formato abreviado para la exportación.
         * Ejemplo: "TYD.3.1.1. Definir problemas o necesidades planteadas" -> "TYD.3.1.1. Definir problemas"
         */
        function getTituloAbreviado(tituloCompleto) {
            // Extraer el código (TYD.3.1.1.)
            const codigoMatch = tituloCompleto.match(/^(TYD\.\d+\.\d+\.\d+)\./);
            if (!codigoMatch) return tituloCompleto;
            
            const codigo = codigoMatch[1] + "."; // Mantener TYD.3.1.1.
            
            // Extraer la parte descriptiva y crear un título abreviado
            let descripcionAbreviada = tituloCompleto.replace(/^TYD\.\d+\.\d+\.\d+\.\s*/, '');
            
            // Crear abreviaciones comunes
            const abreviaciones = {
                'Definir problemas o necesidades planteadas': 'Definir problemas',
                'Comprender y examinar productos tecnológicos': 'Analizar productos tecnológicos',
                'Adoptar medidas preventivas': 'Medidas de seguridad',
                'Idear y diseñar soluciones': 'Ideación y diseño',
                'Seleccionar, planificar y organizar': 'Planificación y organización',
                'Fabricar objetos o modelos': 'Fabricación de objetos',
                'Representar y comunicar': 'Representación y comunicación',
                'Describir, interpretar y diseñar soluciones': 'Algoritmos y diagramas',
                'Programar aplicaciones sencillas': 'Programación de aplicaciones',
                'Automatizar procesos, máquinas y objetos': 'Automatización y robótica',
                'Hacer un uso eficiente y seguro': 'Uso seguro de dispositivos',
                'Crear contenidos y elaborar materiales': 'Creación de contenidos',
                'Organ